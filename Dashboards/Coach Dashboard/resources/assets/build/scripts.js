!function(a,b,c){"use strict";b.module("ngCookies",["ng"]).factory("$cookies",["$rootScope","$browser",function(a,d){function e(){var a,e,f,i;for(a in h)k(g[a])&&d.cookies(a,c);for(a in g)e=g[a],b.isString(e)||(e=""+e,g[a]=e),e!==h[a]&&(d.cookies(a,e),i=!0);if(i){i=!1,f=d.cookies();for(a in g)g[a]!==f[a]&&(k(f[a])?delete g[a]:g[a]=f[a],i=!0)}}var f,g={},h={},i=!1,j=b.copy,k=b.isUndefined;return d.addPollFn(function(){var b=d.cookies();f!=b&&(f=b,j(b,h),j(b,g),i&&a.$apply())})(),i=!0,a.$watch(e),g}]).factory("$cookieStore",["$cookies",function(a){return{get:function(c){var d=a[c];return d?b.fromJson(d):d},put:function(c,d){a[c]=b.toJson(d)},remove:function(b){delete a[b]}}}])}(window,window.angular);var app=angular.module("app",["ngAnimate","ngFileUpload","ngRoute","ngStorage","selectize","truncate","backendHeddoko","app.controllers","app.directives","app.filters","app.rover","app.services","app.utilities","app.views","app.ui.services","app.ui.form.ctrls","app.ui.form.directives","app.ui.ctrls","ui.bootstrap","easypiechart","angular-chartist","app.chart.ctrls","app.chart.directives"]),_appIsLocal=window.location.hostname.match(/.*\.local$/i)||window.location.hostname.match(/.*\.vagrant$/i)?!0:!1,_apiEndpoint="/api/v1";app.constant("isLocalEnvironment",_appIsLocal).constant("apiEndpoint",_apiEndpoint);var appServices=angular.module("app.services",["app.rover"]),appDirectives=angular.module("app.directives",["app.rover"]),appFilters=angular.module("app.filters",["app.utilities"]);app.config(["$routeProvider","isLocalEnvironment",function(a,b){return b&&console.log("Configuring App..."),a.when("/",{redirectTo:"/dashboard"}).when("/dashboard",{templateUrl:"dashboard.html",controller:"DashboardController"}).when("/group",{templateUrl:"group/list.html",controller:"GroupController"}).when("/group/list",{redirectTo:"/group"}).when("/group/edit",{templateUrl:"group/edit.html",controller:"GroupController"}).when("/group/:groupId",{templateUrl:"group/view.html",controller:"GroupController"}).when("/profile",{templateUrl:"profile/list.html",controller:"ProfileController"}).when("/profile/list",{redirectTo:"/profile"}).when("/profile/create",{templateUrl:"profile/create.html",controller:"ProfileController"}).when("/profile/edit",{templateUrl:"profile/edit.html",controller:"ProfileController"}).when("/profile/:profileId",{templateUrl:"profile/view.html",controller:"ProfileController"}).when("/movements/analyze",{templateUrl:"movements/analysis/index.html",controller:"AnalysisController"}).when("/movements/analyze/demo",{templateUrl:"movements/analysis-demo/index.html",controller:"DemoAnalysisController"}).when("/movements/compare",{templateUrl:"movements/comparison/index.html",controller:"TestController"}).when("/movements/upload",{templateUrl:"import/index.html",controller:"ImportController"}).when("/movements/:rootId?/:folderId?/:path?",{templateUrl:"movements/explorer/index.html",controller:"MovementController"}).when("/capture",{templateUrl:"capture/index.html",controller:"TestController"}).when("/capture/demo",{templateUrl:"capture-demo/index.html",controller:"DemoCaptureController"}).when("/screenings",{templateUrl:"screenings/index.html",controller:"ScreeningController"}).when("/screenings/current",{templateUrl:"screenings/current/index.html",controller:"ScreeningController"}).when("/screenings/:screeningId",{templateUrl:"screenings/view/index.html",controller:"ScreeningController"}).when("/account",{templateUrl:"account.html",controller:"UserController"}).when("/config",{templateUrl:"configuration.html",controller:"TestController"}).when("/fms/demo/:name?/:step?",{templateUrl:function(a){var b="index";return a.step?b=a.step:a.name&&(b="test"),"fms-bak/demo/"+b+".html"},controller:"FMSDemoController"}).when("/fms/live/:name?/:step?",{templateUrl:function(a){var b="index";return a.step?b=a.step:a.name&&(b="test"),"fms-bak/live/"+b+".html"},controller:"FMSController"}).when("/demo/trends",{templateUrl:"demo/trends/index.html",controller:"DemoTrendsController"}).when("/fmstest",{templateUrl:"fmstest.html"}).when("/fmsdata",{templateUrl:"fmsdata.html"}).when("/fmsresults",{templateUrl:"fmsresults.html"}).when("/movementscreen",{templateUrl:"movementscreen.html"}).otherwise({redirectTo:"/dashboard"})}]).run(["$rootScope","$location","Rover","Utilities",function(a,b,c,d){d.debug("Running app..."),$(document).ready(function(){d.debug("DOM ready"),c.doneBackgroundProcess(),$(function(){$('[data-toggle="tooltip"]').tooltip()})})}]),angular.module("app.map",[]).directive("uiJqvmap",[function(){return{restrict:"A",scope:{options:"="},link:function(a,b){var c;return c=a.options,b.vectorMap(c)}}}]).controller("jqvmapCtrl",["$scope",function(a){var b;return b={af:"16.63",al:"11.58",dz:"158.97",ao:"85.81",ag:"1.1",ar:"351.02",am:"8.83",au:"1219.72",at:"366.26",az:"52.17",bs:"7.54",bh:"21.73",bd:"105.4",bb:"3.96",by:"52.89",be:"461.33",bz:"1.43",bj:"6.49",bt:"1.4",bo:"19.18",ba:"16.2",bw:"12.5",br:"2023.53",bn:"11.96",bg:"44.84",bf:"8.67",bi:"1.47",kh:"11.36",cm:"21.88",ca:"1563.66",cv:"1.57",cf:"2.11",td:"7.59",cl:"199.18",cn:"5745.13",co:"283.11",km:"0.56",cd:"12.6",cg:"11.88",cr:"35.02",ci:"22.38",hr:"59.92",cy:"22.75",cz:"195.23",dk:"304.56",dj:"1.14",dm:"0.38","do":"50.87",ec:"61.49",eg:"216.83",sv:"21.8",gq:"14.55",er:"2.25",ee:"19.22",et:"30.94",fj:"3.15",fi:"231.98",fr:"2555.44",ga:"12.56",gm:"1.04",ge:"11.23",de:"3305.9",gh:"18.06",gr:"305.01",gd:"0.65",gt:"40.77",gn:"4.34",gw:"0.83",gy:"2.2",ht:"6.5",hn:"15.34",hk:"226.49",hu:"132.28",is:"12.77","in":"1430.02",id:"695.06",ir:"337.9",iq:"84.14",ie:"204.14",il:"201.25",it:"2036.69",jm:"13.74",jp:"5390.9",jo:"27.13",kz:"129.76",ke:"32.42",ki:"0.15",kr:"986.26",undefined:"5.73",kw:"117.32",kg:"4.44",la:"6.34",lv:"23.39",lb:"39.15",ls:"1.8",lr:"0.98",ly:"77.91",lt:"35.73",lu:"52.43",mk:"9.58",mg:"8.33",mw:"5.04",my:"218.95",mv:"1.43",ml:"9.08",mt:"7.8",mr:"3.49",mu:"9.43",mx:"1004.04",md:"5.36",mn:"5.81",me:"3.88",ma:"91.7",mz:"10.21",mm:"35.65",na:"11.45",np:"15.11",nl:"770.31",nz:"138",ni:"6.38",ne:"5.6",ng:"206.66",no:"413.51",om:"53.78",pk:"174.79",pa:"27.2",pg:"8.81",py:"17.17",pe:"153.55",ph:"189.06",pl:"438.88",pt:"223.7",qa:"126.52",ro:"158.39",ru:"1476.91",rw:"5.69",ws:"0.55",st:"0.19",sa:"434.44",sn:"12.66",rs:"38.92",sc:"0.92",sl:"1.9",sg:"217.38",sk:"86.26",si:"46.44",sb:"0.67",za:"354.41",es:"1374.78",lk:"48.24",kn:"0.56",lc:"1",vc:"0.58",sd:"65.93",sr:"3.3",sz:"3.17",se:"444.59",ch:"522.44",sy:"59.63",tw:"426.98",tj:"5.58",tz:"22.43",th:"312.61",tl:"0.62",tg:"3.07",to:"0.3",tt:"21.2",tn:"43.86",tr:"729.05",tm:0,ug:"17.12",ua:"136.56",ae:"239.65",gb:"2258.57",us:"14624.18",uy:"40.71",uz:"37.72",vu:"0.72",ve:"285.21",vn:"101.99",ye:"30.02",zm:"15.69",zw:"5.57"},a.worldMap={map:"world_en",backgroundColor:null,color:"#ffffff",hoverOpacity:.7,selectedColor:"#db5031",hoverColor:"#db5031",enableZoom:!0,showTooltip:!0,values:b,scaleColors:["#F1EFF0","#c1bfc0"],normalizeFunction:"polynomial"},a.USAMap={map:"usa_en",backgroundColor:null,color:"#ffffff",selectedColor:"#db5031",hoverColor:"#db5031",enableZoom:!0,showTooltip:!0,selectedRegion:"MO"},a.europeMap={map:"europe_en",backgroundColor:null,color:"#ffffff",hoverOpacity:.7,selectedColor:"#db5031",hoverColor:"#db5031",enableZoom:!0,showTooltip:!0,values:b,scaleColors:["#F1EFF0","#c1bfc0"],normalizeFunction:"polynomial"}}]),angular.module("countTo",[]).controller("countTo",["$scope",function(a){return a.countersmall1={countTo:20,countFrom:0},a.countersmall2={countTo:42,countFrom:0},a.countersmall3={countTo:90,countFrom:0},a.countersmall1dash={countTo:420,countFrom:0},a.countersmall2dash={countTo:742,countFrom:0},a.countersmall3dash={countTo:100,countFrom:0}}]).directive("countTo",["$timeout",function(a){return{replace:!1,scope:!0,link:function(b,c,d){var e,f,g,h,i,j,k,l=c[0],m=function(){f=30,i=0,b.timoutId=null,j=parseInt(d.countTo)||0,b.value=parseInt(d.value,10)||0,g=1e3*parseFloat(d.duration)||0,h=Math.ceil(g/f),k=(j-b.value)/h,e=b.value},n=function(){b.timoutId=a(function(){e+=k,i++,i>=h?(a.cancel(b.timoutId),e=j,l.textContent=j):(l.textContent=Math.round(e),n())},f)},o=function(){b.timoutId&&a.cancel(b.timoutId),m(),n()};return d.$observe("countTo",function(a){a&&o()}),d.$observe("value",function(a){o()}),!0}}}]),angular.module("app.controllers",[]).controller("StepController",["$scope","Rover",function(a,b){var c={select_and_create_team:0,view_team_members:1,view_athlete_stats:2};a.current_dashboard_page=c.select_and_create_team,a.backwardsStep=function(){a.current_dashboard_page>0&&a.current_dashboard_page--},a.forwardsStep=function(){a.current_dashboard_page<3&&a.current_dashboard_page++}}]).controller("MovementController",["$scope","$sessionStorage","Movements","loggit","Rover",function(a,b,c,d,e){a.uploadMovements=function(){c.upload(a.data.member.selected.id,e.state.selected_sport_movement.id,a.data.new_movement_submission_data).error(function(a){d.logError("error uploading movements to server"),console.log(a)}).success(function(a){e.state.selected_sport_movement=e.state.new_movement_submission_data=null,d.logSuccess("movements succesfully uploaded to server"),console.log(a)})}}]).controller("MovementScreenController",["$scope","$sessionStorage","loggit","MovementStore","$document","Rover",function(a,b,c,d,e,f){a.select_movement=function(a){d.current_movement_page=a},a.data=d,a.SelectTrial=function(a){d.current_movement_page.active_trial=a},a.StartTest=function(){d.current_movement_page.active_side.active_trial.status="recording",document.getElementById("FrontVideoPlayer").currentTime=0,document.getElementById("FrontVideoPlayer").play(),document.getElementById("TopVideoPlayer").currentTime=0,document.getElementById("TopVideoPlayer").play(),document.getElementById("SideVideoPlayer").currentTime=0,document.getElementById("SideVideoPlayer").play()},a.EndTest=function(){document.getElementById("FrontVideoPlayer").pause(),document.getElementById("TopVideoPlayer").pause(),document.getElementById("SideVideoPlayer").pause(),"recording"==d.current_movement_page.active_side.active_trial.status&&(d.current_movement_page.active_side.active_trial.status="stopped")},a.IndicateTestPain=function(){d.current_movement_page.active_side.active_trial.status="pain",document.getElementById("FrontVideoPlayer").pause(),document.getElementById("TopVideoPlayer").pause(),document.getElementById("SideVideoPlayer").pause()},a.CancelCurrentTrial=function(){document.getElementById("FrontVideoPlayer").currentTime=0,document.getElementById("TopVideoPlayer").currentTime=0,document.getElementById("SideVideoPlayer").currentTime=0,d.current_movement_page.active_side.active_trial.status="idle"},a.SaveCurrentTrial=function(){d.current_movement_page.active_side.active_trial.status="saved";var a=d.current_movement_page.active_side.trials.indexOf(d.current_movement_page.active_side.active_trial);a<d.current_movement_page.active_side.trials.length&&(d.current_movement_page.active_side.active_trial=d.current_movement_page.active_side.trials[a+1],document.getElementById("FrontVideoPlayer").currentTime=0,document.getElementById("TopVideoPlayer").currentTime=0,document.getElementById("SideVideoPlayer").currentTime=0)},a.SaveCurrentTrialPain=function(){d.current_movement_page.active_side.active_trial.status="saved_pain";var a=d.current_movement_page.active_side.trials.indexOf(d.current_movement_page.active_side.active_trial);a<d.current_movement_page.active_side.trials.length&&(d.current_movement_page.active_side.active_trial=d.current_movement_page.active_side.trials[a+1],document.getElementById("FrontVideoPlayer").currentTime=0,document.getElementById("TopVideoPlayer").currentTime=0,document.getElementById("SideVideoPlayer").currentTime=0)},a.SubmitTest=function(){document.getElementById("FrontVideoPlayer").currentTime=0,d.current_movement_page.submitted=!0,d.current_movement_page.active_side==d.current_movement_page.sides[0]&&(d.current_movement_page.active_side.test_page_data.other_side_warning=!0)},a.PlayAnalysisVideo=function(){var a=d.current_movement_page.analysis_page_data.playback_rate||1;console.log("Playback rate: "+a),document.getElementById("AnalysisSideVideoPlayer").playbackRate=document.getElementById("AnalysisFrontVideoPlayer").playbackRate=document.getElementById("AnalysisHorizontalVideoPlayer").playbackRate=a,document.getElementById("AnalysisSideVideoPlayer").play(),document.getElementById("AnalysisFrontVideoPlayer").play(),document.getElementById("AnalysisHorizontalVideoPlayer").play()},a.ForwardAnalysisVideo=function(){},a.PauseAnalysisVideo=function(){document.getElementById("AnalysisSideVideoPlayer").pause(),document.getElementById("AnalysisFrontVideoPlayer").pause(),document.getElementById("AnalysisHorizontalVideoPlayer").pause()},a.ResetAnalysisVideo=function(){document.getElementById("AnalysisSideVideoPlayer").pause(),document.getElementById("AnalysisSideVideoPlayer").currentTime=0,document.getElementById("AnalysisFrontVideoPlayer").pause(),document.getElementById("AnalysisFrontVideoPlayer").currentTime=0,document.getElementById("AnalysisHorizontalVideoPlayer").pause(),document.getElementById("AnalysisHorizontalVideoPlayer").currentTime=0},a.tbl_data=[];for(var g=0;5>g;g++)a.tbl_data.push({});a.DataTableToggleMovSel=function(b){b.data_tbl_selected=!b.data_tbl_selected;var c=[],e=[];for(g=0;g<d.current_movement_page.active_side.active_trial.joints.length;g++)for(var f=0;f<d.current_movement_page.active_side.active_trial.joints[g].movements.length;f++)d.current_movement_page.active_side.active_trial.joints[g].movements[f].data_tbl_selected?e.push({val:d.current_movement_page.active_side.active_trial.joints[g].movements[f].name}):e.push({});for(c.push(e),g=0;4>g;g++){for(var h=[],i=0;i<d.current_movement_page.active_side.active_trial.joints.length;i++)for(var j=0;j<d.current_movement_page.active_side.active_trial.joints[i].movements.length;j++)d.current_movement_page.active_side.active_trial.joints[i].movements[j].data_tbl_selected?h.push({val:"0.1"+g}):h.push({});c.push(h)}a.tbl_data=c},a.UpdateDataGraphSeries=function(){a.lineData.series=[];for(var b=0;b<d.current_movement_page.active_side.active_trial.joints.length;b++)for(var c=0;c<d.current_movement_page.active_side.active_trial.joints[b].movements.length;c++)(a.data.current_movement_page.data_page_data.see_all||d.current_movement_page.active_side.active_trial.joints[b].movements[c].data_graph_selected)&&a.lineData.series.push(d.current_movement_page.active_side.active_trial.joints[b].movements[c].series_data)},a.ToggleSelectMovement=function(a,b){if(a.selected){a.selected=!1;var c=b.indexOf(a);c>-1&&b.splice(c,1)}else a.selected=!0,b.push(a)},a.InitializeGraph=function(){a.lineData={labels:["0","10","20","30","40","50","60","70","80","90","100"],series:[]},a.lineOptions={axisY:{referenceValue:100,type:Chartist.FixedScaleAxis,ticks:[25,50,75,100]},axisX:{showGrid:!1,labelInterpolationFnc:function(a){return a+"%"}},showPoint:!1};var b=$(".movement_data_chart"),c=b.append('<div class="chartist-tooltip"></div>').find(".chartist-tooltip").hide();b.on("mouseenter",".ct-line",function(){var a=$(this),b=a.parent().attr("ct:series-name");c.html(b).show()}),b.on("mouseleave",".ct-line",function(){c.hide()}),b.on("mousemove",function(a){c.css({left:(a.offsetX||a.originalEvent.layerX)-c.width()/2-10,top:(a.offsetY||a.originalEvent.layerY)-c.height()-40,background:"#F4C63D"})})}}]),angular.module("app.chart.ctrls",[]).controller("chartingCtrl",["$scope",function(a){return a.easypie1={percent:25,options:{animate:{duration:100,enabled:!0},barColor:"#c1bfc0",lineCap:"round",size:130,lineWidth:8},name:"Bounce rate"},a.easypie2={percent:35,options:{animate:{duration:100,enabled:!0},barColor:"#383d43",lineCap:"round",size:130,lineWidth:8},name:"Daily active user activation"},a.easypie3={percent:87,options:{animate:{duration:100,enabled:!0},barColor:"#db5031",lineCap:"round",size:130,lineWidth:8},name:"registration / unique visit"},a.easypiesmall1={percent:25,options:{animate:{duration:100,enabled:!0},barColor:"#c1bfc0",lineCap:"round",size:67,lineWidth:5},name:"Bounce rate"},a.easypiesmall2={percent:35,options:{animate:{duration:100,enabled:!0},barColor:"#383d43",lineCap:"round",size:67,lineWidth:5},name:"Daily active user activation"},a.easypiesmall3={percent:87,options:{animate:{duration:100,enabled:!0},barColor:"#db5031",lineCap:"round",size:67,lineWidth:5},name:"registration / unique visit"}}]).controller("gaugeCtrl",["$scope",function(a){return a.gauge1={gaugeData:{maxValue:3e3,animationSpeed:100,val:1075},gaugeOptions:{lines:12,angle:0,lineWidth:.47,pointer:{length:.6,strokeWidth:.03,color:"#555555"},limitMax:"false",colorStart:"#c1bfc0",colorStop:"#c1bfc0",strokeColor:"#F5F5F5",generateGradient:!0,percentColors:[[0,"#c1bfc0"],[1,"#c1bfc0"]]}},a.gauge2={gaugeData:{maxValue:3e3,animationSpeed:100,val:1300},gaugeOptions:{lines:12,angle:0,lineWidth:.47,pointer:{length:.6,strokeWidth:.03,color:"#555555"},limitMax:"false",colorStart:"#383d43",colorStop:"#383d43",strokeColor:"#F5F5F5",generateGradient:!0,percentColors:[[0,"#383d43"],[1,"#383d43"]]}},a.gauge3={gaugeData:{maxValue:3e3,animationSpeed:100,val:1500},gaugeOptions:{lines:12,angle:0,lineWidth:.47,pointer:{length:.6,strokeWidth:.03,color:"#555555"},limitMax:"false",colorStart:"#db5031",colorStop:"#db5031",strokeColor:"#F5F5F5",generateGradient:!0,percentColors:[[0,"#db5031"],[1,"#db5031"]]}}}]).controller("morrisChartCtrl",["$scope",function(a){return a.mainData=[{month:"2013-01",xbox:294e3,will:136e3,playstation:244e3},{month:"2013-02",xbox:228e3,will:335e3,playstation:127e3},{month:"2013-03",xbox:199e3,will:159e3,playstation:13e4},{month:"2013-04",xbox:174e3,will:16e4,playstation:82e3},{month:"2013-05",xbox:255e3,will:318e3,playstation:82e3},{month:"2013-06",xbox:298400,will:401800,playstation:98600},{month:"2013-07",xbox:37e4,will:225e3,playstation:159e3},{month:"2013-08",xbox:376700,will:303600,playstation:13e4},{month:"2013-09",xbox:527800,will:301e3,playstation:119400}],a.simpleData=[{year:"2008",value:22},{year:"2009",value:10},{year:"2010",value:5},{year:"2011",value:5},{year:"2012",value:20},{year:"2013",value:19}],a.comboData=[{year:"2008",a:20,b:16,c:12},{year:"2009",a:10,b:22,c:30},{year:"2010",a:5,b:14,c:20},{year:"2011",a:5,b:12,c:19},{year:"2012",a:20,b:19,c:13},{year:"2013",a:28,b:22,c:20}],a.donutData=[{label:"Download Sales",value:12},{label:"In-Store Sales",value:30},{label:"Mail-Order Sales",value:20},{label:"Online Sales",value:19}]}]).controller("chartjsCtrl",["$scope",function(a){return a.chartjsLine={labels:["January","February","March","April","May","June","July"],datasets:[{label:"My First dataset",fillColor:"rgba(56, 61, 67, 0.5)",strokeColor:"rgba(56, 61, 67, 0.5)",pointColor:"#fff",pointStrokeColor:"#fff",pointHighlightFill:"rgba(56, 61, 67, 0.5)",pointHighlightStroke:"rgba(220,220,220,1)",data:[65,59,80,81,56,55,40]},{label:"My Second dataset",fillColor:"rgba(219, 80, 49, 0.8)",strokeColor:"rgba(219, 80, 49, 0.8)",pointColor:"#fff",pointStrokeColor:"#fff",pointHighlightFill:"rgba(219, 80, 49, 0.8)",pointHighlightStroke:"rgba(151,187,205,1)",data:[28,48,40,19,86,27,90]}]},a.chartjsBar={labels:["January","February","March","April","May","June","July"],datasets:[{label:"My First dataset",fillColor:"rgba(56, 61, 67, 0.5)",strokeColor:"rgba(56, 61, 67, 0.5)",highlightFill:"rgba(56, 61, 67, 0.8)",highlightStroke:"rgba(56, 61, 67, 0.8)",data:[65,59,80,81,56,55,40]},{label:"My Second dataset",fillColor:"rgba(219, 80, 49, 0.8)",strokeColor:"rgba(219, 80, 49, 0.8)",highlightFill:"rgba(219, 80, 49, 0.9)",highlightStroke:"rgba(219, 80, 49, 0.9)",data:[28,48,40,19,86,27,90]}]},a.chartjsRadar={labels:["Eating","Drinking","Sleeping","Designing","Coding","Cycling","Running"],datasets:[{label:"My First dataset",fillColor:"rgba(56, 61, 67, 0.8)",strokeColor:"rgba(56, 61, 67, 1)",pointColor:"rgba(56, 61, 67, 1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(56, 61, 67, 1)",data:[65,59,90,81,56,55,40]},{label:"My Second dataset",fillColor:"rgba(219, 80, 49, 0.8)",strokeColor:"rgba(219, 80, 49, 1)",pointColor:"rgba(219, 80, 49, 0.8)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(219, 80, 49, 0.8)",data:[28,48,40,19,96,27,100]}]},a.chartjsPolarArea=[{value:300,color:"#383d43",highlight:"#383d43",label:"Blue"},{value:50,color:"#db5031",highlight:"#db5031",label:"Orange"},{value:100,color:"#fef9d9",highlight:"#fef9d9",label:"Yellow"},{value:40,color:"#c1bfc0",highlight:"#c1bfc0",label:"Grey"},{value:120,color:"#503f3c",highlight:"#503f3c",label:"Dark Brown"}],a.chartjsPie=[{value:300,color:"#383d43",highlight:"#383d43",label:"Blue"},{value:50,color:"#db5031",highlight:"#db5031",label:"Orange"},{value:100,color:"#c1bfc0",highlight:"#c1bfc0",label:"Gray"}],a.chartjsDoughnut=[{value:300,color:"#383d43",highlight:"#383d43",label:"Blue"},{value:50,color:"#db5031",highlight:"#db5031",label:"Orange"},{value:100,color:"#c1bfc0",highlight:"#c1bfc0",label:"Gray"}]}]).controller("flotChartCtrl",["$scope",function(a){var b,c,d;return d={},d.data1=[[1,15],[2,20],[3,14],[4,10],[5,10],[6,20],[7,28],[8,26],[9,22],[10,23],[11,24]],d.data2=[[1,9],[2,15],[3,17],[4,21],[5,16],[6,15],[7,13],[8,15],[9,29],[10,21],[11,29]],a.line1={},a.line1.data=[{data:d.data1,label:"New visitors",lines:{fill:!0}},{data:d.data2,label:"Returning visitors",lines:{fill:!1}}],a.line1.options={series:{lines:{show:!0,fill:!1,lineWidth:3,fillColor:{colors:[{opacity:.3},{opacity:.3}]}},points:{show:!0,lineWidth:3,fill:!0,fillColor:"#ffffff",symbol:"circle",radius:5},shadowSize:0},colors:["#c1bfc0","#db5031"],tooltip:!0,tooltipOpts:{defaultTheme:!1},grid:{hoverable:!0,clickable:!0,tickColor:"#f9f9f9",borderWidth:1,borderColor:"#eeeeee"},xaxis:{ticks:[[1,"Jan."],[2,"Feb."],[3,"Mar."],[4,"Apr."],[5,"May"],[6,"June"],[7,"July"],[8,"Aug."],[9,"Sept."],[10,"Oct."],[11,"Nov."],[12,"Dec."]]}},b={},b.data1=[[2007,15],[2008,20],[2009,10],[2010,5],[2011,5],[2012,20],[2013,28]],b.data2=[[2007,15],[2008,16],[2009,22],[2010,14],[2011,12],[2012,19],[2013,22]],a.area={},a.area.data=[{data:b.data1,label:"Value A",lines:{fill:!0}},{data:b.data2,label:"Value B",points:{show:!0},yaxis:2}],a.area.options={series:{lines:{lineWidth:3,show:!0,fill:!1},points:{show:!0,lineWidth:3,fill:!0,fillColor:"#ffffff",symbol:"circle",radius:5},shadowSize:0},grid:{hoverable:!0,clickable:!0,tickColor:"#f9f9f9",borderWidth:1,borderColor:"#eeeeee"},colors:["#c1bfc0","#db5031"],tooltip:!0,tooltipOpts:{defaultTheme:!1},xaxis:{mode:"time"},yaxes:[{},{position:"right"}]},c={},c.data1=[[2008,20],[2009,10],[2010,5],[2011,5],[2012,20],[2013,28]],c.data2=[[2008,16],[2009,22],[2010,14],[2011,12],[2012,19],[2013,22]],c.data3=[[2008,12],[2009,30],[2010,20],[2011,19],[2012,13],[2013,20]],a.barChart={},a.barChart.data=[{label:"Value A",data:c.data1},{label:"Value B",data:c.data2},{label:"Value C",data:c.data3}],a.barChart.options={series:{stack:!0,bars:{show:!0,fill:1,barWidth:.3,align:"center",horizontal:!1,order:1}},grid:{hoverable:!0,borderWidth:1,borderColor:"#eeeeee"},tooltip:!0,tooltipOpts:{defaultTheme:!1},colors:["#383d43","#db5031","#fef9d9"]},a.pieChart={},a.pieChart.data=[{label:"Download Sales",data:12},{label:"In-Store Sales",data:30},{label:"Mail-Order Sales",data:20},{label:"Online Sales",data:19}],a.pieChart.options={series:{pie:{show:!0}},legend:{show:!0},grid:{hoverable:!0,clickable:!0},colors:["#383d43","#db5031","#fef9d9","#503f3c"],tooltip:!0,tooltipOpts:{content:"%p.0%, %s",defaultTheme:!1}},a.donutChart={},a.donutChart.data=[{label:"Download Sales",data:12},{label:"In-Store Sales",data:30},{label:"Mail-Order Sales",data:20},{label:"Online Sales",data:19}],a.donutChart.options={series:{pie:{show:!0,innerRadius:.5}},legend:{show:!0},grid:{hoverable:!0,clickable:!0},colors:["#383d43","#db5031","#c1bfc0","#503f3c"],tooltip:!0,tooltipOpts:{content:"%p.0%, %s",defaultTheme:!1}},a.donutChart2={},a.donutChart2.data=[{label:"Download Sales",data:12},{label:"In-Store Sales",data:30},{label:"Mail-Order Sales",data:20},{label:"Online Sales",data:19},{label:"Direct Sales",data:15}],a.donutChart2.options={series:{pie:{show:!0,innerRadius:.5}},legend:{show:!1},grid:{hoverable:!0,clickable:!0},colors:["#2693E9","#F5862C","#43B040","#619CC4","#6D90C5"],tooltip:!0,tooltipOpts:{content:"%p.0%, %s",defaultTheme:!1}}}]).controller("flotChartCtrl.realtime",["$scope",function(){}]).controller("sparklineCtrl",["$scope",function(a){return a.demoData1={sparkData:[3,1,2,2,4,6,4,5,2,4,5,3,4,6,4,7],sparkOptions:{type:"line",lineColor:"#fff",highlightLineColor:"#fff",fillColor:"#383d43",spotColor:!1,minSpotColor:!1,maxSpotColor:!1,width:"100%",height:"150px"}},a.simpleChart1={sparkData:[3,1,2,3,5,3,4,2],sparkOptions:{type:"line",lineColor:"#db5031",fillColor:"#c1bfc0",spotColor:!1,minSpotColor:!1,maxSpotColor:!1,width:"100px",height:"50px"}},a.simpleChart2={sparkData:[3,1,2,3,5,3,4,2],sparkOptions:{type:"bar",barColor:"#db5031",width:"100px",height:"50px"}},a.simpleChartlong={sparkData:[1,3,2,5,4,2,1,7,1,8,4,3,5,2,4,5,1,7,1,8],sparkOptions:{type:"bar",barColor:"#c1bfc0",width:"250px",height:"30px"}},a.simpleChart2long={sparkData:[3,1,2,3,5,3,4,2,5,4,2,6,2,4,3,1],sparkOptions:{type:"bar",barColor:"#383d43",width:"200px",height:"30px"}},a.simpleChart2info={sparkData:[3,1,2,3,5,3,4,2],sparkOptions:{type:"bar",barColor:"#FFFFFF",width:"100px",height:"30px"}},a.simpleChart3={sparkData:[3,1,2,3,5,3,4,2],sparkOptions:{type:"pie",sliceColors:["#383d43","#db5031","#c1bfc0","#fef9d9","#503f3c","#365340"],width:"50px",height:"50px"}},a.tristateChart1={sparkData:[1,2,-3,-5,3,1,-4,2],sparkOptions:{type:"tristate",posBarColor:"#383d43",negBarColor:"#c1bfc0",width:"100%",height:"50px"}},a.largeChart1={sparkData:[3,1,2,3,5,3,4,2],sparkOptions:{type:"line",lineColor:"#db5031",highlightLineColor:"#7ACBEE",fillColor:"#c1bfc0",spotColor:!1,minSpotColor:!1,maxSpotColor:!1,width:"100%",height:"150px"}},a.largeChart2={sparkData:[3,1,2,3,5,3,4,2],sparkOptions:{type:"bar",barColor:"#383d43",barWidth:10,width:"100%",height:"150px"}},a.largeChart3={sparkData:[3,1,2,3,5],sparkOptions:{type:"pie",sliceColors:["#383d43","#db5031","#c1bfc0","#fef9d9","#503f3c","#365340"],width:"150px",height:"150px"}}}]),angular.module("app.task",[]).factory("taskStorage",function(){var a,b;return b="tasks",a='[ {"title": "Call customer X", "completed": true}, {"title": "Review marketing system", "completed": true}, {"title": "Do the twist!", "completed": false}, {"title": "Watch over the mars scheme", "completed": false}, {"title": "Complete proposal for spaceship", "completed": false}, {"title": "Do inventory of everything", "completed": false} ]',{get:function(){return JSON.parse(sessionStorage.getItem(b)||a)},put:function(a){return sessionStorage.setItem(b,JSON.stringify(a))}}}).controller("taskCtrl",["$scope","taskStorage","filterFilter","$rootScope","loggit",function(a,b,c,d,e){var f;return f=a.tasks=b.get(),a.newTask="",a.countTasksLeft=c(f,{completed:!1}).length,a.editedTask=null,a.statusFilter={completed:!1},a.filter=function(b){switch(b){case"all":a.statusFilter="";break;case"active":a.statusFilter={completed:!1};break;case"completed":a.statusFilter={completed:!0}}},a.add=function(){var c;return c=a.newTask.trim(),0!==c.length?(f.push({title:c,completed:!1}),e.logSuccess('New task added : "'+c+'"'),b.put(f),a.newTask="",a.countTasksLeft++):void 0},a.edit=function(b){a.editedTask=b},a.doneEditing=function(c){return a.editedTask=null,c.title=c.title.trim(),c.title?e.log("Task was updated"):a.remove(c),b.put(f)},a.remove=function(c){var d;return a.countTasksLeft-=c.completed?0:1,d=a.tasks.indexOf(c),a.tasks.splice(d,1),b.put(f),e.logError("Task was removed")},a.completed=function(c){return a.countTasksLeft+=c.completed?-1:1,b.put(f),c.completed?a.countTasksLeft>0?e.log(1===a.countTasksLeft?"Only "+a.countTasksLeft+" task left":"Well done! Only "+a.countTasksLeft+" tasks left"):e.logSuccess("Yay!! All tasks are done :)"):void 0},a.clearCompleted=function(){return a.tasks=f=f.filter(function(a){return!a.completed}),b.put(f)},a.markAll=function(c){return f.forEach(function(a){a.completed=c}),a.countTasksLeft=c?0:f.length,b.put(f),c?e.logSuccess("Yay!! All tasks are done :)"):void 0},a.$watch("countTasksLeft == 0",function(b){a.allChecked=b}),a.$watch("countTasksLeft",function(a){d.$broadcast("taskRemaining:changed",a)})}]),angular.module("app.form.validation",[]).controller("wizardFormCtrl",["$scope",function(a){return a.wizard={firstName:"some name",lastName:"",email:"",password:"",age:"",address:""},a.isValidateStep1=function(){},a.finishedWizard=function(){}}]).controller("formConstraintsCtrl",["$scope",function(a){var b;return a.form={required:"",minlength:"",maxlength:"",length_rage:"",type_something:"",confirm_type:"",foo:"",email:"",url:"",num:"",minVal:"",maxVal:"",valRange:"",pattern:""},b=angular.copy(a.form),a.revert=function(){return a.form=angular.copy(b),a.form_constraints.$setPristine()},a.canRevert=function(){return!angular.equals(a.form,b)||!a.form_constraints.$pristine},a.canSubmit=function(){return a.form_constraints.$valid&&!angular.equals(a.form,b)}}]).controller("signinCtrl",["$scope",function(a){var b;return a.user={email:"",password:""},a.showInfoOnSubmit=!1,b=angular.copy(a.user),a.revert=function(){return a.user=angular.copy(b),a.form_signin.$setPristine()},a.canRevert=function(){return!angular.equals(a.user,b)||!a.form_signin.$pristine},a.canSubmit=function(){return a.form_signin.$valid&&!angular.equals(a.user,b)},a.submitForm=function(){return a.showInfoOnSubmit=!0,a.revert()}}]).controller("signupCtrl",["$scope",function(a){var b;return a.user={name:"",email:"",password:"",confirmPassword:"",age:""},a.showInfoOnSubmit=!1,b=angular.copy(a.user),a.revert=function(){return a.user=angular.copy(b),a.form_signup.$setPristine(),a.form_signup.confirmPassword.$setPristine()},a.canRevert=function(){return!angular.equals(a.user,b)||!a.form_signup.$pristine},a.canSubmit=function(){return a.form_signup.$valid&&!angular.equals(a.user,b)},a.submitForm=function(){return a.showInfoOnSubmit=!0,a.revert()}}]).directive("validateEquals",[function(){return{require:"ngModel",link:function(a,b,c,d){var e;return e=function(b){var e;return e=b===a.$eval(c.validateEquals),d.$setValidity("equal",e),"function"==typeof e?e({value:void 0}):void 0},d.$parsers.push(e),d.$formatters.push(e),a.$watch(c.validateEquals,function(a,b){return a!==b?d.$setViewValue(d.$ViewValue):void 0})}}}]),angular.module("app.ui.form.ctrls",[]).controller("TagsDemoCtrl",["$scope",function(a){a.tags=["foo","bar"]}]).controller("DatepickerDemoCtrl",["$scope",function(a){return a.today=function(){a.dt=new Date},a.today(),a.showWeeks=!0,a.toggleWeeks=function(){a.showWeeks=!a.showWeeks},a.clear=function(){a.dt=null},a.disabled=function(a,b){return"day"===b&&(0===a.getDay()||6===a.getDay())},a.toggleMin=function(){var b;a.minDate=null!==(b=a.minDate)?b:{"null":new Date}},a.toggleMin(),a.open=function(b){return b.preventDefault(),b.stopPropagation(),a.opened=!0},a.dateOptions={"year-format":"'yy'","starting-day":1},a.formats=["dd-MMMM-yyyy","yyyy/MM/dd","shortDate"],a.format=a.formats[0]}]).controller("TimepickerDemoCtrl",["$scope",function(a){return a.mytime=new Date,a.hstep=1,a.mstep=15,a.options={hstep:[1,2,3],mstep:[1,5,10,15,25,30]},a.ismeridian=!0,a.toggleMode=function(){a.ismeridian=!a.ismeridian},a.update=function(){var b;return b=new Date,b.setHours(14),b.setMinutes(0),a.mytime=b},a.changed=function(){},a.clear=function(){a.mytime=null}}]).controller("TypeaheadCtrl",["$scope",function(a){return a.selected=void 0,a.states=["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Dakota","North Carolina","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"];
}]).controller("RatingDemoCtrl",["$scope",function(a){return a.rate=7,a.max=10,a.isReadonly=!1,a.hoveringOver=function(b){return a.overStar=b,a.percent=100*(b/a.max)},a.ratingStates=[{stateOn:"glyphicon-ok-sign",stateOff:"glyphicon-ok-circle"},{stateOn:"glyphicon-star",stateOff:"glyphicon-star-empty"},{stateOn:"glyphicon-heart",stateOff:"glyphicon-ban-circle"},{stateOn:"glyphicon-heart"},{stateOff:"glyphicon-off"}]}]),angular.module("app.tables",[]).controller("tableCtrl",["$scope","$filter",function(a,b){var c;return a.stores=[{name:"Nijiya Market",price:"$$",sales:292,rating:4},{name:"Eat On Monday Truck",price:"$",sales:119,rating:4.3},{name:"Tea Era",price:"$",sales:874,rating:4},{name:"Rogers Deli",price:"$",sales:347,rating:4.2},{name:"MoBowl",price:"$$$",sales:24,rating:4.6},{name:"The Milk Pail Market",price:"$",sales:543,rating:4.5},{name:"Nob Hill Foods",price:"$$",sales:874,rating:4},{name:"Scratch",price:"$$$",sales:643,rating:3.6},{name:"Gochi Japanese Fusion Tapas",price:"$$$",sales:56,rating:4.1},{name:"Cost Plus World Market",price:"$$",sales:79,rating:4},{name:"Bumble Bee Health Foods",price:"$$",sales:43,rating:4.3},{name:"Costco",price:"$$",sales:219,rating:3.6},{name:"Red Rock Coffee Co",price:"$",sales:765,rating:4.1},{name:"99 Ranch Market",price:"$",sales:181,rating:3.4},{name:"Mi Pueblo Food Center",price:"$",sales:78,rating:4},{name:"Cucina Venti",price:"$$",sales:163,rating:3.3},{name:"Sufi Coffee Shop",price:"$",sales:113,rating:3.3},{name:"Dana Street Roasting",price:"$",sales:316,rating:4.1},{name:"Pearl Cafe",price:"$",sales:173,rating:3.4},{name:"Posh Bagel",price:"$",sales:140,rating:4},{name:"Artisan Wine Depot",price:"$$",sales:26,rating:4.1},{name:"Hong Kong Chinese Bakery",price:"$",sales:182,rating:3.4},{name:"Starbucks",price:"$$",sales:97,rating:3.7},{name:"Tapioca Express",price:"$",sales:301,rating:3},{name:"House of Bagels",price:"$",sales:82,rating:4.4}],a.searchKeywords="",a.filteredStores=[],a.row="",a.select=function(b){var c,d;return d=(b-1)*a.numPerPage,c=d+a.numPerPage,a.currentPageStores=a.filteredStores.slice(d,c)},a.onFilterChange=function(){return a.select(1),a.currentPage=1,a.row=""},a.onNumPerPageChange=function(){return a.select(1),a.currentPage=1},a.onOrderChange=function(){return a.select(1),a.currentPage=1},a.search=function(){return a.filteredStores=b("filter")(a.stores,a.searchKeywords),a.onFilterChange()},a.order=function(c){return a.row!==c?(a.row=c,a.filteredStores=b("orderBy")(a.stores,c),a.onOrderChange()):void 0},a.numPerPageOpt=[3,5,10,20],a.numPerPage=a.numPerPageOpt[2],a.currentPage=1,a.currentPageStores=[],c=function(){return a.search(),a.select(a.currentPage)},a.search()}]),angular.module("app.ui.ctrls",[]).controller("NotifyCtrl",["$scope","loggit",function(a,b){a.notify=function(a){switch(a){case"info":return b.log("Hello! This is an alert of the info importance level.");case"success":return b.logSuccess("Great! You did something successfully.");case"warning":return b.logWarning("Warning! Something that happened that is not critical but important.");case"error":return b.logError("Error! Something went terribly wrong and needs your attention.")}}}]).controller("AlertDemoCtrl",["$scope",function(a){a.alerts=[{type:"success",msg:"Great! You did something successfully."},{type:"info",msg:"Hello! This is an alert of the info importance level."},{type:"warning",msg:"Warning! Something that happened that is not critical but important."},{type:"danger",msg:"Error! Something went terribly wrong and needs your attention."}],a.addAlert=function(){a.alerts.push({msg:"Another alert!"})},a.closeAlert=function(b){a.alerts.splice(b,1)}}]).controller("ProgressDemoCtrl",["$scope",function(a){a.max=200,a.random=function(){var b,c=Math.floor(100*Math.random()+1);b=25>c?"success":50>c?"info":75>c?"warning":"danger",a.showWarning="danger"===b||"warning"===b,a.dynamic=c,a.type=b},a.random(),a.randomStacked=function(){a.stacked=[];for(var b=["success","info","warning","danger"],c=0,d=Math.floor(4*Math.random()+1);d>c;c++){var e=Math.floor(4*Math.random());a.stacked.push({value:Math.floor(30*Math.random()+1),type:b[e]})}},a.randomStacked()}]).controller("AccordionDemoCtrl",["$scope",function(a){return a.oneAtATime=!0,a.groups=[{title:"First Group Header",content:"First Group Body"},{title:"Second Group Header",content:"Second Group Body"},{title:"Third Group Header",content:"Third Group Body"}],a.items=["Item 1","Item 2","Item 3"],a.status={isFirstOpen:!0,isFirstOpen1:!0,isFirstOpen2:!0,isFirstOpen3:!0,isFirstOpen4:!0,isFirstOpen5:!0,isFirstOpen6:!0},a.addItem=function(){var b;b=a.items.length+1,a.items.push("Item "+b)}}]).controller("CollapseDemoCtrl",["$scope",function(a){a.isCollapsed=!1}]).controller("ModalDemoCtrl",["$scope","$modal","$log",function(a,b,c){a.items=["item1","item2","item3"],a.open=function(d){var e=b.open({templateUrl:"myModalContent.html",controller:"ModalInstanceCtrl",size:d,resolve:{items:function(){return a.items}}});e.result.then(function(b){a.selected=b},function(){c.info("Modal dismissed at: "+new Date)})}}]).controller("ModalInstanceCtrl",["$scope","$modalInstance","items",function(a,b,c){a.items=c,a.selected={item:a.items[0]},a.ok=function(){b.close(a.selected.item)},a.cancel=function(){b.dismiss("cancel")}}]).controller("PaginationDemoCtrl",["$scope",function(a){a.totalItems=64,a.currentPage=4,a.setPage=function(b){a.currentPage=b},a.pageChanged=function(){console.log("Page changed to: "+a.currentPage)},a.maxSize=5,a.bigTotalItems=175,a.bigCurrentPage=1}]).controller("MapDemoCtrl",["$scope","$http","$interval",function(a,b,c){var d,e;for(e=[],d=0;8>d;)e[d]=new google.maps.Marker({title:"Marker: "+d}),d++;a.GenerateMapMarkers=function(){var b,c,f,g,h;for(b=new Date,a.date=b.toLocaleString(),h=Math.floor(4*Math.random())+4,d=0;h>d;)c=38.73+Math.random()/100,f=-9.14+Math.random()/100,g=new google.maps.LatLng(c,f),e[d].setPosition(g),e[d].setMap(a.map),d++},c(a.GenerateMapMarkers,2e3)}]).controller("TreeDemoCtrl",["$scope",function(a){a.list=[{id:1,title:"1. dragon-breath",items:[]},{id:2,title:"2. moiré-vision",items:[{id:21,title:"2.1. tofu-animation",items:[{id:211,title:"2.1.1. spooky-giraffe",items:[]},{id:212,title:"2.1.2. bubble-burst",items:[]}]},{id:22,title:"2.2. barehand-atomsplitting",items:[]}]},{id:3,title:"3. unicorn-zapper",items:[]},{id:4,title:"4. romantic-transclusion",items:[]}],a.callbacks={},a.remove=function(a){a.remove()},a.toggle=function(a){a.toggle()},a.newSubItem=function(a){var b=a.$modelValue;b.items.push({id:10*b.id+b.items.length,title:b.title+"."+(b.items.length+1),items:[]})}}]),angular.module("app.controllers").controller("AnalysisController",["$scope","Rover","Utilities",function(a,b,c){c.debug("AnalysisController"),b.browseTo.path("/movements/analyze/demo")}]),angular.module("app.controllers").controller("DashboardController",["$scope","Rover","Utilities",function(a,b,c){c.debug("DashboardController");var d=(new Date).getHours();a.greeting="Good Morning",d>11&&17>d?a.greeting="Good Afternoon":d>=17&&(a.greeting="Good Evening"),a.bookmarks=[{title:"Upload a Movement",uri:"#/movements/upload",icon:"cloud-upload"},{title:"Record a Movement",uri:"#/capture",icon:"video-camera"},{title:"Movement Tests",uri:"#/screenings",icon:"pencil-square-o"},{title:"Analyze a Movement",uri:"#/movements/analyze",icon:"line-chart"}]}]),angular.module("app.controllers").controller("DemoAnalysisController",["$scope","$timeout","Rover","Utilities",function(a,b,c,d){d.debug("DemoAnalysisController"),a.videos=[document.getElementById("sagittalVideo"),document.getElementById("coronalVideo"),document.getElementById("transverseVideo")],angular.forEach(a.videos,function(c){c.volume=0,c.addEventListener("ended",function(){b(a.reset)},!0)}),a.isPlaying=!1,a.play=function(){d.debug("play()"),a.isPlaying=!0,angular.forEach(a.videos,function(a,b){d.debug("Playing video #"+b),a.play()})},a.pause=function(){d.debug("pause()"),a.isPlaying=!1,angular.forEach(a.videos,function(a,b){d.debug("Pausing video #"+b),a.pause()})},a.reset=function(){d.debug("reset()"),a.pause(),angular.forEach(a.videos,function(a,b){d.debug("Resetting video #"+b),a.currentTime=a.seekable.start(0)})},a.forward=function(){d.debug("forward()"),a.pause(),angular.forEach(a.videos,function(a,b){d.debug("Forwarding video #"+b),a.currentTime=a.currentTime+1>=a.seekable.end(0)?a.seekable.end(0):a.currentTime+1})},a.backward=function(){d.debug("backward()"),a.pause(),angular.forEach(a.videos,function(a,b){d.debug("Backwarding video #"+b),a.currentTime=a.currentTime-1<=a.seekable.start(0)?a.seekable.start(0):a.currentTime-1})},a.adjustHeight=function(){var a=$("#secondaryViewsContainer").height()-15;$("#emphasizedViewContainer").css("height",a+"px"),d.debug("Main container height: "+a),$("#emphasizedViewContainer video").css("height",.6*a+"px"),d.debug("Main video height: "+.6*a)},angular.element(document).ready(function(){b(a.adjustHeight,1e3)})}]),angular.module("app.controllers").controller("DemoCaptureController",["$scope","$timeout","Rover","Utilities",function(a,b,c,d){d.debug("DemoCaptureController"),a.movements=[],a.movementNames=["Deep Squat","Hurdle Step L","Hurdle Step R","Inline Lunge L","Inline Lunge R","Shoulder Mobility L","Shoulder Mobility R","Impingment L","Impingment R","Active Straight-Leg Raise L","Active Straight-Leg Raise R","Trunk Stability Push-Up","Spinal Expansion","Rotary Stability L","Rotary Stability R","Posterior Rocking"],angular.forEach(a.movementNames,function(b){a.movements.push({name:b,done:!1,current:!1,score:0})}),a.movements[0].current=!0,a.currentMovementIndex=0,a.videos=[document.getElementById("sagittalVideoCapture"),document.getElementById("coronalVideoCapture"),document.getElementById("transverseVideoCapture")],angular.forEach(a.videos,function(c){c.volume=0,c.addEventListener("ended",function(){b(a.reset)},!0)}),a.isPlaying=!1,a.start=function(){a.isPlaying=!0,angular.forEach(a.videos,function(a,b){a.play()})},a.done=function(){a.isPlaying=!1,angular.forEach(a.videos,function(a,b){a.pause(),a.currentTime=a.seekable.start(0)}),a.currentMovementIndex==a.movements.length-1?(angular.forEach(a.movements,function(a){a.done=!1,a.current=!1}),a.movements[0].current=!0,a.currentMovementIndex=0):(a.movements[a.currentMovementIndex].done=!0,a.movements[a.currentMovementIndex].current=!1,a.movements[++a.currentMovementIndex].current=!0)},a.adjustHeight=function(){var a=$("#secondaryViewsContainer").height()-15;$("#emphasizedViewContainer").css("height",a+"px"),d.debug("Main container height: "+a),$("#emphasizedViewContainer video").css("height",.6*a+"px"),d.debug("Main video height: "+.6*a)},angular.element(document).ready(function(){b(a.adjustHeight,1e3)})}]),angular.module("app.controllers").controller("FMSDemoController",["$scope","$routeParams","FMSDemoFactory","Rover",function(a,b,c,d){d.debug("FMSDemoController"),a.isDemo=!0,a.assetVersion="0.5.6",a.params=b,a.params.step=a.params.step||"test",a.isTestLive=!1,a.fms=c.data,a.run={name:null,start:function(){this.name||this.prepare(),d.debug("Starting run: "+this.name),this.setStatus("live"),a.isTestLive=!0,$(".demo-test").each(function(){this.currentTime=0,this.play()})},end:function(){d.debug("Ending run: "+this.name),this.setStatus("saved"),a.isTestLive=!1,$(".demo-test").each(function(){this.pause()}),this.moveToNextTrial()},pain:function(){d.debug("Ending run (with pain): "+this.name),this.setStatus("pain"),a.isTestLive=!1,$(".demo-test").each(function(){this.pause()}),this.moveToNextTrial()},fault:function(){d.debug("Restarting run: "+this.name),this.setStatus("pending"),a.isTestLive=!1,this.getRun().numFaults++,$(".demo-test").each(function(){this.pause(),this.currentTime=0})},reset:function(){this.exists()&&(this.getRun().status="pending",this.getRun().numFaults=0)},moveToNextTrial:function(a,b){var e,f,g,h;for(e=0;e<c.data.current.trials.length;e++)if(f=c.data.current.trials[e],g=this.getName(f,a),h=this.getRun(g),!h||"pending"==h.status)return c.data.current.trial=f,c.data.current.iteration=a||c.data.current.iteration,this.prepare(),$(".demo-test").each(function(){this.currentTime=0}),d.debug("Automatic next trial: "+g),!0;if(!b&&c.data.current.iterations.length>1)for(e=0;e<c.data.current.iterations.length;e++)if(this.moveToNextTrial(c.data.current.iterations[e],!0))return!0},submit:function(){d.debug("Submitting demo FMS data..."),c.data.runs={},c.data.current.isTestSubmitted=!0,$(".demo-test").each(function(){this.currentTime=0})},prepare:function(){(!c.data.current.iteration||c.data.current.iteration.length<1)&&(c.data.current.iteration="main"),c.data.current.trial||(c.data.current.trial=c.data.current.trials[0]);var a=this.getName();return d.debug("Preparing test run: "+a),this.exists(a)?void d.debug("Test has already been run."):(this.name=a,void(c.data.runs[a]=$.extend(!0,{},c.runDataTemplate,{})))},getName:function(a,b,d){return a=a||c.data.current.trial||c.data.current.trials[0],b=b||c.data.current.iteration||"main",d=d||c.data.current,d.id+"."+b+"."+a.name},getRun:function(a){return a=a||this.getName(),c.data.runs[a]?c.data.runs[a]:null},getRunByTrial:function(a){return this.getRun(this.getName(a))},exists:function(a){a=a||this.getName();var b=this.getRun(a);return b?"pending"!=b.status:!1},setStatus:function(a){this.name||this.prepare(),c.data.runs[this.name].status=a},getStatus:function(a){if(a){var b=this.getName(a),c=this.getRun(b);return c?c.status:null}return this.name?this.getRun().status:null}},a.analysis={trialPane:!1,planePane:!1,playbackRatePane:!1,playbackRate:.5,play:function(){$(".demo-analysis").each(function(){this.currentTime=0,this.play()})},setPlaybackRate:function(a){this.playbackRate=a,$(".demo-analysis").each(function(){this.playbackRate=a})},pause:function(){$(".demo-analysis").each(function(){this.pause()})},reset:function(){$(".demo-analysis").each(function(){this.pause(),this.currentTime=0})}},a.summary={joints:{all:!1,hip:!0,knee:!1,select:function(a){for(var b in this)"boolean"==typeof this[b]&&(this[b]=a==b||"all"==a)}}},c.data.current.trial||(c.data.current.trial=c.data.current.trials[0])}]),angular.module("app.controllers").controller("SubmitFMSDemoController",["$scope","$routeParams","Rover","assetVersion",function(a,b,c,d){c.debug("SubmitFMSDemoController"),a.params=b,a.assetVersion=d}]),angular.module("app.controllers").controller("DemoTrainingSessionController",["$scope","$timeout","DemoTrendsService","Rover","Utilities",function(a,b,c,d,e){e.debug("DemoTrainingSessionController"),a.metric=null,a.session=null,a.isFetchingSessionData=!1,a.isFetchingSelectedMetricData=!1,a.isSessionDataLoaded=!1,a.colours=[e.colour.heddokoGreen,"#79d9d8","#6eb4d2"],a.fakeData={},a.chartjsCustomTooltip=function(a){if(a){var b="session-plot-"+a.labels[0]+"-"+a.labels[1];return e.debug(b),e.debug(a),a.title}},a.chartjsOptions={animation:!0,datasetFill:!1,pointDot:!1,scaleBeginAtZero:!1,scaleFontColor:"#888",scaleFontFamily:'"Proxima Nova", sans-serif',scaleGridLineColor:e.colour.blue,scaleLabel:"<%=value%> °/s",scaleLineColor:e.colour.blue,showTooltips:!0,tooltipFillColor:a.colours[1],tooltipFontColor:e.colour.blue,tooltipFontFamily:'"Proxima Nova", sans-serif',tooltipTitleFontFamily:'"Proxima Nova", sans-serif',tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>",legendTemplate:'<ul class="<%= name.toLowerCase() %>-legend"><% for (var i = 0; i < datasets.length; i++){%><li><span style="background-color:<%= datasets[i].strokeColor %>"></span><% if (datasets[i].label) { %><%= datasets[i].label %><% } %></li><% } %></ul>'},a.chartjsData={labels:["0","20 Throws","40 Throws","60 Throws","80 Throws","100 Throws","120 Throws","140 Throws","160 Throws"],datasets:[{datasetFill:!0,fillColor:"rgba(187, 187, 187, 0.1)",label:"Threshold",strokeColor:"rgba(187, 187, 187, 0.1)",data:[2100,2100,2100,2100,2100,2100,2100,2100,2100]},{label:"Angular Velocity",strokeColor:a.colours[2],strokeFillColor:a.colours[2],data:[2550,2600,2750,2810,2740,2530,2100,1988,1902]}]},a.chartjsWidth=function(){return $("#chartRow").width()-30},a.selectizeSessionModel=0,a.selectizeMetricModel=0,a.selectizeSessionConfig={create:!1,valueField:"id",labelField:"title",searchField:["title"],maxItems:1,onChange:function(c){e.debug("Session: "+c),angular.forEach(a.selectizeSessionOptions,function(d){e.debug(d),d.id==c&&b(function(){a.session=d})})}},a.selectizeMetricConfig={create:!1,valueField:"id",labelField:"title",searchField:["title"],maxItems:1,onChange:function(c){e.debug("Metric: "+c),angular.forEach(a.selectizeMetricOptions,function(d){e.debug(d),d.id==c&&b(function(){a.metric=d})})}},a.selectizeSessionOptions=[{id:5,type:"session",title:"February 3, 2016"},{id:4,type:"session",title:"February 2, 2016"},{id:3,type:"session",title:"February 1, 2016"},{id:2,type:"session",title:"January 29, 2016"},{id:1,type:"session",title:"January 28, 2016"}],a.selectizeMetricOptions=[{id:1,type:"metric",title:"Peak Elbow Angular Velocity"},{id:2,type:"metric",title:"Sample Metric 1"},{id:3,type:"metric",title:"Sample Metric 2"},{id:4,type:"metric",title:"Sample Metric 3"}],a.fakeData.gauge={data:{maxValue:1e3,animationSpeed:20,val:820},options:{lines:12,angle:0,lineWidth:.3,pointer:{length:.6,strokeWidth:.03,color:e.colour.silver},limitMax:"false",colorStart:e.colour.blue,colorStop:e.colour.blue,strokeColor:e.colour.heddokoGreen,generateGradient:!0,percentColors:[[0,e.colour.heddokoGreen],[1,"#c1bfc0"]]}},a.fakeData.morris=[{year:"2008",a:20,b:16,c:12},{year:"2009",a:10,b:22,c:30},{year:"2010",a:5,b:14,c:20},{year:"2011",a:5,b:12,c:19},{year:"2012",a:20,b:19,c:13},{year:"2013",a:28,b:22,c:20}],a.fakeData.morrisColours='["'+a.colours[0]+'","'+a.colours[1]+'","'+a.colours[2]+'"]',a.fetchDataDemo=function(c,d){a.session&&a.metric&&!a.isFetchingSessionData&&c&&("metric"==c.type&&a.isSessionDataLoaded?(a.isFetchingSelectedMetricData=!0,b(function(){a.isFetchingSelectedMetricData=!1},800)):(a.isFetchingSessionData=!0,b(function(){a.isSessionDataLoaded=!0,a.isFetchingSessionData=!1},800)))},a.$watch("session",a.fetchDataDemo),a.$watch("metric",a.fetchDataDemo)}]),angular.module("app.controllers").controller("DemoTrendsController",["$scope","$timeout","$filter","DemoTrendsService","Rover","Utilities",function(a,b,c,d,e,f){f.debug("DemoTrendsController"),a.profile=a.global.getSelectedProfile(),a.thresholdValue=2800,a.thresholdIncrement=20,a.isFetchingData=!1,a.metric=null,a.increaseThreshold=function(){a.thresholdValue=a.thresholdValue>=a.flotOptions.yaxes[0].max-a.thresholdIncrement?parseInt(a.flotOptions.yaxes[0].max):parseInt(a.thresholdValue)+a.thresholdIncrement},a.decreaseThreshold=function(){a.thresholdValue=a.thresholdValue<=a.flotOptions.yaxes[0].min+a.thresholdIncrement?parseInt(a.flotOptions.yaxes[0].min):parseInt(a.thresholdValue)-a.thresholdIncrement},a.selectizeMetricModel=0,a.selectizeMetricConfig={create:!1,valueField:"id",labelField:"title",searchField:["title"],maxItems:1,onChange:function(c){angular.forEach(a.selectizeMetricOptions,function(d){d.id==c&&b(function(){a.metric=d})})}},a.selectizeMetricOptions=[{id:1,type:"metric",title:"Peak Elbow Angular Velocity"},{id:2,type:"metric",title:"Sample Metric 1"},{id:3,type:"metric",title:"Sample Metric 2"},{id:4,type:"metric",title:"Sample Metric 3"}],a.easypie={percent:Math.round(100*a.thresholdValue/3e3),options:{animate:{duration:100,enabled:!0},barColor:function(a){return 80>a?"#db5031":85>a?"#fabd39":90>a?"#6eb4d2":95>a?"#79d9d8":"#3bd6b2"},lineCap:"round",lineWidth:4,scaleColor:!1,size:130,trackColor:!1}},a.$watch("thresholdValue",function(b,c){b!=c&&(a.easypie.percent=Math.min(100,Math.round(275e3/a.thresholdValue)))}),a.flotOptions={grid:{clickable:!0,hoverable:!0,borderWidth:1,borderColor:f.colour.blue},legend:{show:!1},series:{bars:{barWidth:.5,fill:1,show:!0},hoverable:!0},xaxis:{ticks:[]},yaxes:[{color:f.colour.blue,min:500,max:3500,position:"left"},{color:f.colour.blue,position:"right",min:20,max:100}],tooltip:!0,tooltipOpts:{defaultTheme:!1},colors:["#fff","#fff","#fff","#fff","#fff",f.colour.heddokoGreen,"#79d9d8","#6eb4d2",f.colour.heddokoGreen,"#79d9d8","#6eb4d2",f.colour.heddokoGreen,"#fff",f.colour.heddokoGreen]},a.flotData=[{bars:{show:!1},data:[],lines:{fill:!0,fillColor:"rgba(255, 255, 255, 0.1)",lineWidth:0,show:!0},yaxis:1},{bars:{show:!1},data:[],lines:{fill:!0,fillColor:"rgba(255, 255, 255, 0.1)",lineWidth:0,show:!0},yaxis:1},{bars:{show:!1},data:[],lines:{fill:!0,fillColor:"rgba(255, 255, 255, 0.1)",lineWidth:0,show:!0},yaxis:1},{bars:{show:!1},data:[],lines:{fill:!0,fillColor:"rgba(255, 255, 255, 0.1)",lineWidth:0,show:!0},yaxis:1},{bars:{show:!1},data:[],lines:{fill:!0,fillColor:"rgba(255, 255, 255, 0.1)",lineWidth:0,show:!0},yaxis:1},{data:[],highlightColor:"#fff",yaxis:1},{data:[],highlightColor:"#fff",yaxis:1},{data:[],highlightColor:"#fff",yaxis:1},{data:[],highlightColor:"#fff",yaxis:1},{data:[],highlightColor:"#fff",yaxis:1},{data:[],highlightColor:"#fff",yaxis:1},{data:[],highlightColor:"#fff",yaxis:1},{bars:{show:!1},data:[],lines:{color:"#fff",fill:!1,lineWidth:2,show:!0},points:{fill:!0,fillColor:"#fff",radius:5,show:!0},yaxis:1},{bars:{show:!1},clickable:!0,data:[],label:"Return to play",lines:{fill:!1,lineWidth:2,show:!0},isThresholdSeries:!0,yaxis:1}],a.flotPlotHover=function(b,d,e){e?$("#demo-flot-tooltip").html("<b>"+c("number")(e.datapoint[1],0)+' &deg;/s</b><br><span style="text-transform: uppercase; color: #333;">Recovery: '+Math.min(100,Math.round(100*e.datapoint[1]/a.thresholdValue))+"%</span>").css({top:e.pageY-$("#demo-flot-tooltip").height()-35,left:e.pageX+5,"background-color":e.series.color}).fadeIn(200):$("#demo-flot-tooltip").hide()},$('<div id="demo-flot-tooltip"></div>').css({position:"absolute",display:"none",padding:"5px 10px",color:"#000","text-align":"center",opacity:.7}).appendTo("body"),a.dataMax=2800,a.dataPointsInitialDensity=5,a.dataMedians=[1250,1320,1400,1590,1960,2240,2750],a.flotDataStartIndex=5,a.randomDataPoint=function(a,b){return Math.floor(Math.random()*(b-a))+a};var g,h,i,j,k,l,m,n,o=0;for(g=0;g<a.dataMedians.length;g++)for(o++,i=a.dataPointsInitialDensity+Math.floor(Math.pow(g*a.dataPointsInitialDensity,1.1)),j=Math.floor(i/2)+o,f.debug("Week: "+(g+1)),f.debug("Density: "+i),f.debug("Midpoint: "+j),k=g>1?"Week "+(g+1):g+1,a.flotOptions.xaxis.ticks.push([j,k]),a.flotData[a.flotDataStartIndex+a.dataMedians.length].data.push([j,a.dataMedians[g]]),h=0;i>h;h++)l=a.dataMedians[g]-100+2*h,m=a.dataMedians[g]+20+2*h,n=a.randomDataPoint(l,m),a.flotData[a.flotDataStartIndex+g].data.push([o++,n]);a.dataLastPoint=o,a.flotData[0].data.push([0,3e3]),a.flotData[0].data.push([a.dataLastPoint,3e3]),a.flotData[1].data.push([0,2400]),a.flotData[1].data.push([a.dataLastPoint,2400]),a.flotData[2].data.push([0,1800]),a.flotData[2].data.push([a.dataLastPoint,1800]),a.flotData[3].data.push([0,1200]),a.flotData[3].data.push([a.dataLastPoint,1200]),a.flotData[4].data.push([0,600]),a.flotData[4].data.push([a.dataLastPoint,600]),a.flotData[a.flotData.length-1].data.push([0,2800]),a.flotData[a.flotData.length-1].data.push([a.dataLastPoint,2800]),a.fetchDataDemo=function(c,d){!a.isFetchingData&&c&&(a.isFetchingData=!0,b(function(){a.isFetchingData=!1},800))},a.$watch("session",a.fetchDataDemo),a.$watch("metric",a.fetchDataDemo)}]),angular.module("app.controllers").controller("FMSController",["$scope","$routeParams","Rover",function(a,b,c){c.debug("FMSController"),a.params=b,a.assetVersion="0.5.6"}]),angular.module("app.controllers").controller("FMSFormController",["$scope","$sessionStorage","FMSForm","FMSService","loggit","Rover",function(a,b,c,d,e,f){a.data.show_fms_edit=!1,a.waiting_server_response=!1,a.data.selected_fms_form=null,a.files={},a.$watch("global.state.profile.selected",function(b){null!==b&&d.get(a.global.state.profile.selected.id).then(function(b){a.global.state.profile.selected.fms_forms=b.data},function(a){f.debug("Could not retrieve forms: "+a.statusText)})},!0),a.submitFMSForm=function(){a.waiting_server_response=!0,f.debug("Submitting FMS form data...");var b=a.data.fms_form_data,c={profile_id:a.global.state.profile.selected.id,notes:b.comment,tests:[{title:"Deep Squat",score:b.deepsquat,notes:b.deepsquatcomments},{title:"Hurdle step (L)",score:b.Lhurdle,notes:b.Lhurdlecomments},{title:"Hurdle step (R)",score:b.Rhurdle,notes:b.Rhurdlecomments},{title:"Inline lunge (L)",score:b.Llunge,notes:b.Llungecomments},{title:"Inline lunge (R)",score:b.Rlunge,notes:b.Rlungecomments},{title:"Shoulder Mobility (L)",score:b.Lshoulder,notes:b.Lshouldercomments},{title:"Shoulder Mobility (R)",score:b.Rshoulder,notes:b.Rshouldercomments},{title:"Active straight-leg raise (L)",score:b.Lactive,notes:b.Lactivecomments},{title:"Active straight-leg raise (R)",score:b.Ractive,notes:b.Ractivecomments},{title:"Trunk stability push-up",score:b.trunk,notes:b.trunkcomments},{title:"Rotary stability (L)",score:b.Lrotary,notes:b.Lrotarycomments},{title:"Rotary stability (R)",score:b.Rrotary,notes:b.Rrotarycomments}]};c.score=21,f.debug(c),d.create(c).then(function(b){a.data.fms_form_data={},a.global.state.profile.selected.fms_forms=b.data.fms,a.waiting_server_response=!1,e.logSuccess("FMS Form successfully submitted")},function(b){e.logError("There was an error submitting the FMS Form"),a.waiting_server_response=!1,f.debug(b)})},a.updateFMS=function(){a.waiting_server_response=!0,c.update(a.global.state.profile.selected.id,a.data.selected_fms_form).success(function(b){a.global.state.profile.selected.fms_forms=b,a.waiting_server_response=!1,f.state.show_fms_edit=!1,e.logSuccess("FMS Form successfully updated")}).error(function(){e.logError("There was an error while attempting to update the FMS Form"),a.waiting_server_response=!1})},a.fmsdisplay=function(b){b.deepsquatcomments=b.deepsquatcomments||"",b.hurdlecomments=b.hurdlecomments||"",b.lungecomments=b.lungecomments||"",b.shouldercomments=b.shouldercomments||"",b.impingementcomments=b.impingementcomments||"",b.activecomments=b.activecomments||"",b.trunkcomments=b.trunkcomments||"",b.presscomments=b.presscomments||"",b.rotarycomments=b.rotarycomments||"",b.posteriorcomments=b.posteriorcomments||"",a.data.selected_fms_form=b}}]),angular.module("app.controllers").controller("GroupController",["$scope","$routeParams","GroupService","Upload","Utilities","Rover","isLocalEnvironment","$timeout",function(a,b,c,d,e,f,g,h){e.debug("GroupController"),a.group={id:0},b.groupId>0&&f.hasState("group",b.groupId)&&(f.store.groupId=b.groupId,a.group=f.getState("group",b.groupId)),a.newGroup={id:0,name:""},a.calculateAvatarHeight=function(){return $("#groupDetails")?$("#groupDetails").css("height"):0},a.createGroup=function(){e.debug("Creating group..."),f.addBackgroundProcess();var b=a.newGroup;c.create(b).then(function(a){f.doneBackgroundProcess(),200===a.status&&(f.setState("group",a.data.id,a.data),f.browseTo.group(a.data))},function(a){f.doneBackgroundProcess()})},a.saveGroupDetails=function(){return c.update(a.global.getSelectedGroup().id,a.global.getSelectedGroup())},a.saveGroupDetailsCallback=function(a){a?(f.setState("group",this.id,this),f.browseTo.group()):e.alert("Could not save profile details. Please try again later."),f.doneBackgroundProcess()},a.updateGroup=function(){e.debug("Updating group..."),f.addBackgroundProcess();var b=a.group;c.update(b.id,b).then(function(a){f.doneBackgroundProcess(),200===a.status&&f.browseTo.group()},function(a){e.debug("Could not update group: "+a.responseText),f.doneBackgroundProcess()})},a.deleteGroup=function(){return e.debug("Deleting group..."),e.debug("TODO: update group list update on success..."),e.alert("In Development."),!1},a.uploadAvatarEndpoint=a.global.getSelectedGroup()?"/api/v1/groups/"+a.global.getSelectedGroup().id+"/avatar":"",a.uploadAvatarCallback=function(){a.global.getSelectedGroup().avatarSrc=this.avatarSrc,a.global.state.group.list[this.group.id].avatarSrc=this.avatarSrc},a.$watch("global.store.groupId",function(b,c){b!==c&&(a.group=a.global.getSelectedGroup())})}]),angular.module("app.controllers").controller("ImportController",["$scope","$timeout","Upload","Rover","Utilities",function(a,b,c,d,e){e.debug("ImportController"),a.global.data.isImporting=a.global.data.isImporting||!1,a.global.data["import"]=a.global.data["import"]||{},a.global.data["import"].progress=a.global.data["import"].progress||0,a.global.data["import"].imported=a.global.data["import"].imported||[],a.global.data["import"].queue=a.global.data["import"].queue||[],a.global.data["import"].queueTotal=a.global.data["import"].queueTotal||0,a.global.data["import"].status=a.global.data["import"].status||"",a.startImport=function(b){b&&(a.global.data.isImporting=!0,a.global.data["import"].queue=b,e.debug("Uploading "+b.length+" movement files..."),a.global.data["import"].queueTotal=b.length,a.global.data["import"].progress=0,a.chainImport())},a.chainImport=function(){if(a.global.data["import"].queue.length<1)return a.global.data.isImporting=!1,e.debug("Uploading done.");var b=a.global.data["import"].queue[0];e.debug('Uploading "'+b.name+'"...'),a.global.data["import"].status='Importing "'+b.name+'"...',c.upload({url:"/api/v1/movements",data:{file:b,profileId:a.global.getSelectedProfile().id}}).then(function(b){a.global.data["import"].imported.unshift(b.data),a.global.data["import"].queue.splice(0,1),a.global.data["import"].progress=Math.round(100*(a.global.data["import"].queueTotal-a.global.data["import"].queue.length)/a.global.data["import"].queueTotal),a.chainImport()},function(c){e.debug(c.status+": "+c.data),e.alert('Could not import "'+b.name+'". Please try again later.'),a.global.data["import"].queue.splice(0,1),a.global.data["import"].progress=Math.round(100*(a.global.data["import"].queueTotal-a.global.data["import"].queue.length)/a.global.data["import"].queueTotal),a.chainImport()},function(b){a.global.data["import"].progress=Math.round(100*(a.global.data["import"].queueTotal-a.global.data["import"].queue.length+Math.min(1,b.loaded/b.total))/a.global.data["import"].queueTotal)})},a.selectThumbnail=function(){d.openThumbnailSelector()},a.editMovement=function(){d.openMovementEditor()},a.deleteMovement=function(a){d.debug("Deleting movement #"+a),e.alert("In Development.")}}]),angular.module("app.controllers").controller("MainController",["$scope","$timeout","ProfileService","GroupService","UserService","OnboardingService","Rover","Utilities","isLocalEnvironment",function(a,b,c,d,e,f,g,h,i){h.debug("MainController"),a.global={appVersion:$('meta[name="version"]').attr("content"),isLocal:i,store:g.store,state:g.state,data:{},endSession:g.endSession,browseTo:g.browseTo,alert:h.alert,onboarding:{general:f.general}},a.global.state.user=a.global.state.user||{id:0},a.global.state.group=a.global.state.group||{},a.global.state.group.list=a.global.state.group.list||{length:0},a.global.store.groupId=a.global.store.groupId||0,a.global.state.profile=a.global.state.profile||{},a.global.state.profile.list=a.global.state.profile.list||{length:0},a.global.state.profile.filtered=a.global.state.profile.filtered||[],a.global.store.profileId=a.global.store.profileId||0,a.global.state.screening=a.global.state.screening||{},a.global.state.screening.list=a.global.state.screening.list||{length:0},a.global.state.screening.current=a.global.state.screening.current||{id:0},a.global.data.isFetchingScreeningData=!1,a.global.data.isFetchingScreeningList=!1,a.global.data.isPreparingNewScreening=!1,a.global.getGroup=function(a){return g.getState("group",a,null)},a.global.getSelectedGroup=function(){return g.getState("group",g.store.groupId,{id:0})},a.global.getSelectedProfile=function(){return g.getState("profile",g.store.profileId,{id:0})},a.global.selectProfile=function(c){b(function(){a.global.store.profileId=h.getId(c)})},a.fetchGroups=function(){h.debug("Fetching groups..."),a.global.data.isFetchingGroups=!0,d.list(["avatarSrc"]).then(function(b){g.state.group.list={length:0},angular.forEach(b.data,function(a){g.setState("group",a.id,a)}),
!a.global.data.isFetchingProfiles&&b.data.length>0&&(0===a.global.store.groupId?a.global.store.groupId=b.data[0].id:a.global.updateFilteredProfiles()),a.global.data.isFetchingGroups=!1},function(b){h.debug("Could not retrieve group list: "+b.statusText),a.global.data.isFetchingGroups=!1})},a.global.updateFilteredProfiles=function(b,c){var d=!1;a.global.state.profile.filtered=[],angular.forEach(a.global.state.profile.list,function(c){c&&c.id&&(0===b?(a.global.state.profile.filtered.push(c),c.id==a.global.store.profileId&&(d=!0)):(b=b||a.global.store.groupId,c.groups&&c.groups.length&&angular.forEach(c.groups,function(e){e.id==b&&(a.global.state.profile.filtered.push(c),c.id==a.global.store.profileId&&(d=!0))})))}),d||(a.global.store.profileId=a.global.state.profile.filtered.length?a.global.state.profile.filtered[0].id:0)},a.fetchProfiles=function(){h.debug("Fetching profiles..."),a.global.data.isFetchingProfiles=!0,c.list(null,["avatarSrc","groups","meta"]).then(function(b){a.global.state.profile.list={length:0},angular.forEach(b.data,function(a){g.setState("profile",a.id,a)}),0===a.global.store.profileId&&b.data.length>0&&(a.global.store.profileId=b.data[0].id),a.global.updateFilteredProfiles(),a.global.data.isFetchingProfiles=!1},function(b){h.debug("Could not retrieve profile list: "+b.statusText),a.global.data.isFetchingProfiles=!1})},0===a.global.state.user.id&&(h.debug("Retrieving user details"),a.global.data.isFetchingUser=!0,e.get(g.userHash).then(function(b){a.global.state.user=b.data,a.global.data.isFetchingUser=!1},function(b){h.debug("Could not retrieve user details: "+b.statusText),g.state.user={id:0},a.global.data.isFetchingUser=!1})),0===a.global.state.profile.list.length&&b(a.fetchProfiles,1e3),0===a.global.state.group.list.length&&b(a.fetchGroups,2e3),a.$watch("global.store.groupId",a.global.updateFilteredProfiles),a.$watch("global.store.profileId",function(b,c){if(h.debug("Selected profile: "+b),0!==b){var d=g.getState("profile",b);d&&d.groups&&d.groups.length&&d.groups[0].id!=a.global.store.groupId&&(a.global.store.groupId=d.groups[0].id)}})}]),angular.module("app.controllers").controller("DashboardMemberController",["$scope","$routeParams","Athletes","FMSForm","Rover",function(a,b,c,d,e){a.params=b,a.deleteProfile=function(){e.debug("Deleting profile..."),e.addBackgroundProcess(),c.destroy(a.data.group.selected.id,a.data.profile.selected.id).then(function(a){200===a.status&&e.browseTo.group(e.state.group.selected),e.doneBackgroundProcess()},function(a){e.doneBackgroundProcess()})},a.fmsForms={},a.loadFMSForms=function(){d.get(e.state.member.selected.id).then(function(b){200===b.status?a.fmsForms=b.data:a.fmsForms={}},function(a){})},a.$watch("data.member.selected",function(b,c){e.debug("Loading FMS forms..."),a.loadFMSForms()}),a.$watch("params.memberId",function(b,c){if(!(0===b||b===a.data.member.selected.id||a.data.member.list.length<1)){for(var d,f,g=0;g<a.data.member.list.length;g++)if(d=a.data.member.list[g],d.id==b){f=d;break}f?(e.debug("Selecting member #"+b+"..."),a.data.member.selected=f):e.error("Member #"+b+" not found.")}},!0)}]),angular.module("app.controllers").controller("ModalController",["$scope","Rover","Utilities",function(a,b,c){c.debug("ModalController"),a.$watch("Rover.overlayData",function(b,c){b&&(a.title=b.title,a.bodyTemplate=b.bodyTemplate,a.footerTemplate=b.footerTemplate)})}]),angular.module("app.controllers").controller("MovementController",["$scope","$routeParams","FolderService","Rover","Utilities",function(a,b,c,d,e){e.debug("MovementController"),a.global.data.isFetchingMovementData=!0,a.layout={name:d.getConfig("movements.layout","large-tiles"),list:[{name:"large-tiles",icon:"th-large"},{name:"small-tiles",icon:"th"},{name:"details",icon:"list"}]},a.path="/",a.folders=[],a.movements=[],a.parentFolder=!1,a.rootProfile=!1,a.updateRootFolders=function(b){b=b||a.global.state.profile.list,a.folders=[],b.length&&angular.forEach(b,function(b){b.id&&b.id>0&&a.folders.push({name:b.firstName+" "+b.lastName,href:"#/movements/"+b.id})}),a.global.data.isFetchingMovementData=!1},a.updateFolders=function(b){a.folders=[],b&&b.length&&angular.forEach(b,function(b){a.folders.push({name:b.name,href:"#/movements/"+b.profileId+"/"+b.id+"/"+b.path.replace("/","_").replace(/\s+/g,"-")+"_"+b.name.replace(/\s+/g,"-")})})},a.fetchMovementData=function(b){e.debug("Fetching movement data..."),a.global.data.isFetchingMovementData=!0,b=b||0,c.get(a.rootProfile.id,b).then(function(b){a.updateFolders(b.data.children),a.parentFolder={href:"#/movements"},b.data.parent&&(a.parentFolder.name=b.data.parent.name,a.parentFolder.href+="/"+b.data.profileId+"/"+b.data.parent.id+"/"+b.data.path.replace("/","_").replace(/\s+/g,"-")),b.data.path&&(b.data.path.length>1?a.path+=b.data.path.replace("/"," / ")+" / "+b.data.name:a.path+=" / "+b.data.name),a.movements=b.data.movements,a.global.data.isFetchingMovementData=!1},function(b){e.alert("Could not retrieve movement data. Please try again later."),a.global.data.isFetchingMovementData=!1})},a.editMovement=function(){d.openMovementEditor()},a.shareMovement=function(a){e.debug("Sharing movement #"+a),e.alert("In Development.")},a.deleteMovement=function(a){e.debug("Deleting movement #"+a),e.alert("In Development.")},b.rootId&&d.state.profile.list[b.rootId]?(a.rootProfile=d.state.profile.list[b.rootId],a.path+=" "+a.rootProfile.firstName+" "+a.rootProfile.lastName,a.fetchMovementData(b.folderId)):b.rootId?d.browseTo.path("/movements"):a.global.data.isFetchingProfiles===!1&&a.updateRootFolders(),a.$watch("global.profile.list",function(c,d){b.rootId||a.updateRootFolders(c)}),a.$watch("layout.name",function(a){d.setConfig("movements.layout",a)})}]),angular.module("app.controllers").controller("ProfileController",["$scope","$routeParams","$filter","Rover","ProfileService","GroupService","Utilities","$http",function(a,b,c,d,e,f,g,h){g.debug("ProfileController"),a.profile={id:0},b.profileId>0&&d.hasState("profile",b.profileId)&&(d.store.profileId=b.profileId,a.profile=d.getState("profile",b.profileId)),a.isProfilePage=!0,a.newProfile={id:0,feet:0,inches:0,weightInPounds:0,notes:"",gender:"",primaryTag:{},secondaryTags:[]},a.groups=a.global.state.group.list,a.group=a.global.getSelectedGroup(),a.profiles=a.global.state.profile.list,a.calculateAvatarHeight=function(){return $("#profileDetails")?$("#profileDetails").css("height"):0},a.createProfile=function(){d.addBackgroundProcess(),g.debug("Creating profile...");var b=e.formatForStorage(a.newProfile);b.groups=[a.global.getSelectedGroup().id],e.create(b,["avatarSrc","groups","meta"]).then(function(a){d.setState("profile",a.data.id,a.data),d.browseTo.path("/profile/"+a.data.id),d.doneBackgroundProcess()},function(a){g.debug("Could not create profile: "+a.statusText),g.alert("Could not create profile. Please try again later."),d.doneBackgroundProcess()})},a.saveProfileDetails=function(){var b=e.formatForStorage(a.profile);return e.update(b.id,b,["avatarSrc","groups","meta"])},a.saveProfileDetailsCallback=function(b){b?(d.setState("profile",this.id,e.format(this)),a.global.updateFilteredProfiles()):g.alert("Could not save profile details. Please try again later.")},a.deleteProfile=function(){g.debug("Deleting profile..."),d.addBackgroundProcess(),e.destroy(a.profile.id).then(function(b){d.setState("profile",a.profile.id,null),a.global.state.profile.list.length--,a.global.updateFilteredProfiles(),a.global.store.profileId=0,d.browseTo.group(),d.doneBackgroundProcess()},function(a){g.debug("Could not delete profile: "+a.responseText),g.alert("Could not delete profile. Please try again later."),d.doneBackgroundProcess()})},a.uploadAvatarEndpoint="/api/v1/profiles/"+a.profile.id+"/avatar",a.uploadAvatarCallback=function(){d.getState("profile",a.profile.id).avatarSrc=this.avatarSrc,angular.forEach(a.global.state.profile.filtered,function(b){b.id===a.profile.id&&(b.avatarSrc=this.avatarSrc)}.bind(this))},a.$watch("global.store.profileId",function(b,c){b!==c&&(a.profile=a.global.getSelectedProfile(),a.profile=e.format(a.profile))}),a.profile.id>0&&(a.profile=e.format(a.profile))}]),angular.module("app.controllers").controller("ScreeningResultsController",["$scope","$routeParams","ScreeningService","Rover","Utilities",function(a,b,c,d,e){e.debug("ScreeningResultsController"),a.global.state.screening=a.global.state.screening||{},a.global.state.screening.list=a.global.state.screening.list||{length:0},a.global.state.screening.current=a.global.state.screening.current||{id:0},a.global.data.isFetchingScreeningData=!1,a.global.data.isPreparingNewScreening=!1,a.screening=a.global.state.screening.current,a.screening.id>0&&a.screening.profileId?a.screeningProfile=a.global.state.profile.list[a.screening.profileId]||{id:0}:a.screeningProfile={id:0},a.selectScreening=function(b){if(!(a.global.state.screening.list.length<1))if("object"==typeof b)a.global.state.screening.current=b,d.browseTo.path("/screenings/current");else{var c;for(c in a.global.state.screening.list)if(c.id==b){a.global.state.screening.current=c,d.browseTo.path("/screenings/current");break}}},a.createFunctionalMovementScreening=function(){e.debug("Creating standard FMS..."),a.global.data.isPreparingNewScreening=!0,c.create(a.global.getSelectedProfile().id,{title:"Functional Movement Screening",scoreMax:3,movements:[{title:"Deep Squat"},{title:"Hurdle Step - Left"},{title:"Hurdle Step - Right"},{title:"Inline Lunge - Left"},{title:"Inline Lunge - Right"},{title:"Shoulder Mobility - Left"},{title:"Shoulder Mobility - Right"},{title:"Impingment Test - Left",meta:{params:{isClearanceTest:!0}}},{title:"Impingment Test - Right",meta:{params:{isClearanceTest:!0}}},{title:"Active Straight-Leg Raise - Left"},{title:"Active Straight-Leg Raise - Right"},{title:"Trunk Stability Push-Up"},{title:"Spinal Extension",meta:{params:{isClearanceTest:!0}}},{title:"Rotary Stability - Left"},{title:"Rotary Stability - Right"},{title:"Posterior Rocking",meta:{params:{isClearanceTest:!0}}}]}).then(function(b){e.debug("Screening created."),a.global.state.screening.current=a.formatScreening(b.data),a.global.state.screening.list.unshift(a.global.state.screening.current),a.global.data.isPreparingNewScreening=!1},function(b){a.global.data.isPreparingNewScreening=!1,e.alert("Could not create screening. Please try again later.")})},a.fetchScreening=function(b){e.debug("Retrieving screening #"+b+"..."),a.global.data.isFetchingScreeningData=!0,c.get(b).then(function(b){e.debug("Received "+b.data.results.length+" results."),a.global.state.screening.current=b.data,a.global.data.isFetchingScreeningData=!1},function(b){e.debug("Could not retrieve screening data. Please try again later."),a.global.data.isFetchingScreeningData=!1})},a.fetchScreenings=function(){e.debug("Retrieving screenings..."),a.global.data.isFetchingScreeningData=!0,c.search({query:"",profileId:null,offset:0,limit:20,orderBy:"createdAt",orderDir:"desc"}).then(function(b){e.debug("Received "+b.data.results.length+" results."),a.global.state.screening.list=b.data.results.map(a.formatScreening),a.global.data.isFetchingScreeningData=!1},function(b){e.debug("Could not retrieve screening data. Please try again later."),a.global.data.isFetchingScreeningData=!1})},a.formatScreening=function(b){return b.profile={firstName:"",lastName:""},b&&d.state.profile.list[b.profileId]?(b.profile.firstName=a.global.state.profile.list[b.profileId].firstName,b.profile.lastName=a.global.state.profile.list[b.profileId].lastName,b):b},b.screeningId,0===a.global.state.screening.list.length&&a.fetchScreenings(),a.$watch("global.store.screeningId",function(a){}),a.$watch("global.state.screening.current",function(b){a.screening=b.id>0?b:{id:0},b.id>0&&b.profileId&&(a.screeningProfile=a.global.state.profile.list[b.profileId]||{id:0})})}]),angular.module("app.controllers").controller("ScreeningController",["$scope","$routeParams","ScreeningService","Rover","Utilities",function(a,b,c,d,e){e.debug("ScreeningController"),a.screening=a.global.state.screening.current,a.screening.id>0&&a.screening.profileId?a.screeningProfile=a.global.state.profile.list[a.screening.profileId]||{id:0}:a.screeningProfile={id:0},a.selectScreening=function(b){if(!(a.global.state.screening.list.length<1))if("object"==typeof b)a.global.state.screening.current=b,d.browseTo.path("/screenings/current");else{var c;for(c in a.global.state.screening.list)if(c.id==b){a.global.state.screening.current=c,d.browseTo.path("/screenings/current");break}}},a.createFunctionalMovementScreening=function(){e.debug("Creating standard FMS..."),a.global.data.isPreparingNewScreening=!0,c.create(a.global.getSelectedProfile().id,{title:"Functional Movement Screening",scoreMax:3,movements:[{title:"Deep Squat"},{title:"Hurdle Step - Left"},{title:"Hurdle Step - Right"},{title:"Inline Lunge - Left"},{title:"Inline Lunge - Right"},{title:"Shoulder Mobility - Left"},{title:"Shoulder Mobility - Right"},{title:"Impingment Test - Left",meta:{params:{isClearanceTest:!0}}},{title:"Impingment Test - Right",meta:{params:{isClearanceTest:!0}}},{title:"Active Straight-Leg Raise - Left"},{title:"Active Straight-Leg Raise - Right"},{title:"Trunk Stability Push-Up"},{title:"Spinal Extension",meta:{params:{isClearanceTest:!0}}},{title:"Rotary Stability - Left"},{title:"Rotary Stability - Right"},{title:"Posterior Rocking",meta:{params:{isClearanceTest:!0}}}]}).then(function(b){e.debug("Screening created."),a.global.state.screening.current=a.formatScreening(b.data),a.global.state.screening.list.unshift(a.global.state.screening.current),a.global.data.isPreparingNewScreening=!1},function(b){a.global.data.isPreparingNewScreening=!1,e.alert("Could not create screening. Please try again later.")})},a.fetchScreening=function(b){e.debug("Retrieving screening #"+b+"..."),a.global.data.isFetchingScreeningData=!0,c.get(b).then(function(b){e.debug("Received "+b.data.results.length+" results."),a.global.state.screening.current=b.data,a.global.data.isFetchingScreeningData=!1},function(b){e.debug("Could not retrieve screening data. Please try again later."),a.global.data.isFetchingScreeningData=!1})},a.fetchScreeningList=function(){e.debug("Retrieving list of screenings..."),a.global.data.isFetchingScreeningData=!0,c.search({query:"",profileId:null,offset:0,limit:20,orderBy:"createdAt",orderDir:"desc"}).then(function(b){e.debug("Received "+b.data.results.length+" results."),a.global.state.screening.list=b.data.results.map(a.formatScreening),a.global.data.isFetchingScreeningData=!1},function(b){e.debug("Could not retrieve screening data. Please try again later."),a.global.data.isFetchingScreeningData=!1})},a.formatScreening=function(b){return b.profile={firstName:"",lastName:""},b&&d.state.profile.list[b.profileId]?(b.profile.firstName=a.global.state.profile.list[b.profileId].firstName,b.profile.lastName=a.global.state.profile.list[b.profileId].lastName,b):b},b.screeningId,0===a.global.state.screening.list.length&&a.fetchScreeningList(),a.$watch("global.store.screeningId",function(a){}),a.$watch("global.state.screening.current",function(b){a.screening=b.id>0?b:{id:0},b.id>0&&b.profileId&&(a.screeningProfile=a.global.state.profile.list[b.profileId]||{id:0})})}]),angular.module("app.controllers").controller("SearchController",["$scope","$timeout","Rover","Utilities",function(a,b,c,d){d.debug("SearchController"),a.filters=[{name:"profile",label:"Find an athlete",placeholder:"search for athletes...",icon:"user"},{name:"group",label:"Find a team",placeholder:"search for teams...",icon:"users"},{name:"movement",label:"Find a movement",placeholder:"search for movements...",icon:"heartbeat"},{name:"screening",label:"Find a screening",placeholder:"search for screenings...",icon:"list-alt"}],a.config={create:!1,valueField:"id",maxItems:1,searchField:["firstName","lastName","name","title"],render:{option:function(b,c){var d="";switch(a.selectedFilter.name){case"profile":d=c(b.firstName)+" "+c(b.lastName);break;case"group":d=c(b.name);break;case"movement":d="";break;case"screening":d=""}return"<div>"+d+"</div>"},item:function(b,c){var d="";switch(a.selectedFilter.name){case"profile":d=c(b.firstName);break;case"group":d=c(b.name);break;case"movement":d="";break;case"screening":d=""}return"<div>"+d+"</div>"}},onInitialize:function(b){a.selectize=b},load:function(b,e){if(!b||!b.length)return e();var f=null;switch(a.selectedFilter.name){case"profile":d.debug("Looking up profiles..."),e(a.options);break;case"group":d.debug("Looking up groups..."),e(a.options);break;case"movement":c.debug("Looking up movements..."),d.alert("In Development."),e();break;case"screening":d.debug("Looking up screenings..."),d.alert("In Development."),e()}f&&$http.get(f,{params:{query:b,limit:50}}).then(function(a){e(a.data)},function(a){e()})},onFocus:function(){d.debug("onFocus"),a.selectize.clear()},onChange:function(d){switch(a.selectedFilter.name){case"profile":b(function(){c.browseTo.profile(d)});break;case"group":b(function(){c.browseTo.group(d)})}}},a.options=[],a.filterBy=function(b){switch(a.model=null,b.name){case"profile":a.options=[],angular.forEach(a.global.state.profile.list,function(b){b&&b.id&&a.options.push(b)});break;case"group":a.options=[],angular.forEach(a.global.state.group.list,function(b){b&&b.id&&a.options.push(b)});break;default:a.options=[]}$(".top-nav .selectize-input input").attr("placeholder",b.placeholder),$(".top-nav .selectize-input input").innerWidth(340),a.selectedFilter=c.store.searchFilter=b},b(function(){a.filterBy(c.store.searchFilter||a.filters[0])})}]),angular.module("app.controllers").controller("TeamController",["$scope","$routeParams","Rover",function(a,b,c){a.params=b}]),angular.module("app.controllers").controller("TestController",["$scope","Rover","Utilities",function(a,b,c){c.debug("TestController")}]),angular.module("app.controllers").controller("UserController",["$scope","UserService","Rover","Utilities",function(a,b,c,d){d.debug("UserController"),a.uploadAvatarEndpoint="/api/v1/users/"+c.userHash+"/avatar",a.calculateAvatarHeight=function(){return $("#userDetails")?$("#userDetails").css("height"):0},a.uploadAvatarCallback=function(){a.user=c.state.user=this},a.user=c.state.user||{id:0},0===a.user.id&&(d.debug("Retrieving user details"),b.get(c.userHash).then(function(b){a.user=c.state.user=b.data},function(b){d.alert("Could not retrieve user details. Please try again later."),a.user=c.state.user={id:0}})),a.saveUserDetails=function(){return b.update(c.userHash,a.user)},a.saveUserDetailsCallback=function(a){a||d.alert("Could not save your details. Please try again later.")}}]),angular.module("app.chart.directives",[]).directive("gaugeChart",[function(){return{scope:{gaugeData:"=",gaugeOptions:"="},link:function(a,b){var c,d,e;c=a.gaugeData,e=a.gaugeOptions,d=new Gauge(b[0]).setOptions(e),d.maxValue=c.maxValue,d.animationSpeed=c.animationSpeed,d.set(c.val)}}}]).directive("chart",function(){var a=600,b=400;return{restrict:"E",template:"<canvas></canvas>",scope:{chartObject:"=value",data:"="},link:function(c,d,e){var f,g=d.find("canvas")[0],h=g.getContext("2d"),i={type:e.type||"Line",width:e.width||a,height:e.height||b};g.width=i.width,g.height=i.height,f=new Chart(h);var j=e.type;f[j](c.data,i),c.$watch(function(){return c.chartObject},function(a){if(a){var b=i.type;f[b](c.chartObject.data,c.chartObject.options)}})}}}).directive("flotChart",[function(){return{restrict:"A",scope:{data:"=",options:"="},link:function(a,b){var c,d,e,f;f=a.data;var g=0;if($.each(f,function(a,b){b.color=g,++g}),$(b[0]).parent().find(".choices").length>0){var h=$(b[0]).parent().find(".choices");h.html(""),$.each(f,function(a,b){h.append("<br/><div class='choice-item'><label for='id"+a+"' class='ui-checkbox'><input name='"+a+"' type='checkbox' id='id"+a+"' checked='checked' value='option1'><span>"+b.label+"</span></label></div>")});var i=function(){var c=[];h.find("input:checked").each(function(){var a=$(this).attr("name");a&&f[a]&&c.push(f[a])}),c.length>0&&$.plot(b[0],c,a.options)};h.find("input").click(i)}return c=a.data,d=a.options,e=$.plot(b[0],c,d)}}}]).directive("flotChartRealtime",[function(){return{restrict:"A",link:function(a,b){var c,d,e,f,g,h;return c=[],f=300,d=function(){var a,b,d,e;for(c.length>0&&(c=c.slice(1));c.length<f;)b=c.length>0?c[c.length-1]:50,e=b+10*Math.random()-5,0>e?e=0:e>100&&(e=100),c.push(e);for(d=[],a=0;a<c.length;)d.push([a,c[a]]),++a;return d},g=function(){e.setData([d()]),e.draw(),setTimeout(g,h)},c=[],f=300,h=200,e=$.plot(b[0],[d()],{series:{lines:{show:!0,fill:!0},shadowSize:0},yaxis:{min:0,max:100,show:!0,color:"#f5f5f5"},xaxis:{show:!0,color:"#f5f5f5"},grid:{hoverable:!0,borderWidth:1,borderColor:"#fff"},colors:["#383d43"]}),g()}}}]).directive("sparkline",[function(){return{scope:{sparkData:"=",sparkOptions:"="},link:function(a,b){var c,d,e,f;c=a.sparkData,d=a.sparkOptions,e=void 0,f=function(){b.sparkline(c,d)},$(window).resize(function(){return clearTimeout(e),e=setTimeout(f,200)}),f()}}}]).directive("morrisChart",[function(){return{scope:{data:"="},link:function(a,b,c){var d,e,f,g,h;switch(e=a.data,c.type){case"line":return d=void 0===c.lineColors||""===c.lineColors?null:JSON.parse(c.lineColors),g={element:b[0],data:e,xkey:c.xkey,ykeys:JSON.parse(c.ykeys),labels:JSON.parse(c.labels),lineWidth:c.lineWidth||2,lineColors:d||["#0b62a4","#7a92a3","#4da74d","#afd8f8","#edc240","#cb4b4b","#9440ed"]},h=new Morris.Line(g),$(window).resize(function(){h.redraw()});case"area":return d=void 0===c.lineColors||""===c.lineColors?null:JSON.parse(c.lineColors),g={element:b[0],data:e,xkey:c.xkey,ykeys:JSON.parse(c.ykeys),labels:JSON.parse(c.labels),lineWidth:c.lineWidth||2,lineColors:d||["#0b62a4","#7a92a3","#4da74d","#afd8f8","#edc240","#cb4b4b","#9440ed"],behaveLikeLine:c.behaveLikeLine||!1,fillOpacity:c.fillOpacity||"auto",pointSize:c.pointSize||4},h=new Morris.Area(g),$(window).resize(function(){h.redraw()});case"bar":return d=void 0===c.barColors||""===c.barColors?null:JSON.parse(c.barColors),g={element:b[0],data:e,xkey:c.xkey,ykeys:JSON.parse(c.ykeys),labels:JSON.parse(c.labels),barColors:d||["#0b62a4","#7a92a3","#4da74d","#afd8f8","#edc240","#cb4b4b","#9440ed"],stacked:c.stacked||null},h=new Morris.Bar(g),$(window).resize(function(){});case"donut":return d=void 0===c.colors||""===c.colors?null:JSON.parse(c.colors),g={element:b[0],data:e,colors:d||["#0B62A4","#3980B5","#679DC6","#95BBD7","#B0CCE1","#095791","#095085","#083E67","#052C48","#042135"]},c.formatter&&(f=new Function("y","data",c.formatter),g.formatter=f),h=new Morris.Donut(g),$(window).resize(function(){h.redraw()})}}}}]),angular.module("app.directives").directive("imgHolder",[function(){return{link:function(a,b){return Holder.run({images:b[0]})}}}]).directive("customBackground",function(){return{controller:["$scope","$element","$location",function(a,b,c){var d,e;return e=function(){return c.path()},d=function(a){switch(b.removeClass("body-home body-special body-tasks body-lock"),a){case"/":return b.addClass("body-home");case"/404":case"/pages/500":case"/pages/signin":case"/pages/signup":case"/pages/forgot":return b.addClass("body-special");case"/pages/lock-screen":return b.addClass("body-special body-lock");case"/tasks":return b.addClass("body-tasks")}},d(c.path()),a.$watch(e,function(a,b){return a!==b?d(c.path()):void 0})}]}}).directive("uiColorSwitch",[function(){return{restrict:"A",link:function(a,b){return b.find(".color-option").on("click",function(a){var b,c,d;if(b=$(this),c=void 0,d=b.data("style"),"loulou"===d)c="styles/main.css",$('link[href^="styles/main"]').attr("href",c);else{if(!d)return!1;d="-"+d,c="styles/main"+d+".css",$('link[href^="styles/main"]').attr("href",c)}return a.preventDefault()})}}}]).directive("toggleMinNav",["$rootScope",function(a){return{link:function(b,c){var d,e,f,g,h,i;return h=$("#app"),f=$(window),e=$("#nav-container"),d=$("#content"),c.on("click",function(b){h.hasClass("nav-min")?h.removeClass("nav-min"):(h.addClass("nav-min"),a.$broadcast("minNav:enabled"),b.preventDefault())}),g=void 0,i=function(){var a;return a=f.width(),980>a?h.addClass("nav-min"):void 0},initResize=function(){var a;return a=f.width(),980>a?h.addClass("nav-min"):h.removeClass("nav-min")},f.resize(function(){var a;return clearTimeout(a),a=setTimeout(i,300)}),initResize()}}}]).directive("collapseNav",[function(){return{link:function(a,b){var c,d,e,f,g;return e=b.find("ul").parent("li"),e.append('<i class="fa fa-arrow-circle-o-right icon-has-ul"></i>'),c=e.children("a"),f=b.children("li").not(e),d=f.children("a"),g=$("#app"),c.on("click",function(a){var b,c;return g.hasClass("nav-min")?!1:(c=$(this),b=c.parent("li"),e.not(b).removeClass("open").find("ul").slideUp(),b.toggleClass("open").find("ul").stop().slideToggle(),a.preventDefault())}),d.on("click",function(){return e.removeClass("open").find("ul").slideUp()}),a.$on("minNav:enabled",function(){return e.removeClass("open").find("ul").slideUp()})}}}]).directive("highlightActive",[function(){return{controller:["$scope","$element","$attrs","$location",function(a,b,c,d){var e,f,g;return f=b.find("a"),g=function(){return d.path()},e=function(a,b){return b="#"+b,angular.forEach(a,function(a){var c,d,e;return d=angular.element(a),c=d.parent("li"),e=d.attr("href"),c.hasClass("active")&&c.removeClass("active"),0===b.indexOf(e)?c.addClass("active"):void 0})},e(f,d.path()),a.$watch(g,function(a,b){return a!==b?e(f,d.path()):void 0})}]}}]).directive("toggleOffCanvas",[function(){return{link:function(a,b){return b.on("click",function(){return $("#app").toggleClass("on-canvas").toggleClass("nav-min")})}}}]).directive("slimScroll",[function(){return{link:function(a,b,c){return b.slimScroll({height:c.scrollHeight||"100%"})}}}]).directive("goBack",[function(){return{restrict:"A",controller:["$scope","$element","$window",function(a,b,c){return b.on("click",function(){return c.history.back()})}]}}]),angular.module("app.ui.form.directives",[]).directive("uiRangeSlider",[function(){return{restrict:"A",link:function(a,b){return b.slider()}}}]).directive("uiFileUpload",[function(){return{restrict:"A",link:function(a,b){return b.bootstrapFileInput()}}}]).directive("uiSpinner",[function(){return{restrict:"A",compile:function(a){return a.addClass("ui-spinner"),{post:function(){return a.spinner()}}}}}]).directive("uiWizardForm",[function(){return{link:function(a,b){return b.steps()}}}]).directive("fileModel",["$parse",function(a){return{restrict:"A",link:function(b,c,d){var e=a(d.fileModel),f=e.assign;c.bind("change",function(){b.$apply(function(){f(b,c[0].files)})})}}}]),angular.module("app.directives").directive("themeChart",function(){var a=600,b=400;return{restrict:"E",template:"<canvas></canvas>",scope:{chartObject:"=value",data:"=",options:"=?"},link:function(c,d,e){var f,g=d.find("canvas")[0],h=g.getContext("2d"),i=c.options||{};i.type=e.type||i.type||"Line",i.width=e.width||i.width||a,i.height=e.height||i.height||b,g.width=i.width,g.height=i.height,f=new Chart(h),f[i.type](c.data,i);var j=function(a){if(console.log("redraw()"),a){console.log("drawing...");var b=i.type;f[b](c.chartObject.data,c.chartObject.options)}};c.$watch(function(){return c.chartObject},j),c.$watch("scope.data",j)}}}).directive("themeChartTimeout",["$timeout",function(a){var b=600,c=400;return{restrict:"E",template:"<canvas></canvas>",scope:{chartObject:"=value",data:"=",timeout:"=",options:"=?"},link:function(a,d,e){var f,g=d.find("canvas")[0],h=g.getContext("2d"),i=a.options||{};i.type=e.type||i.type||"Line",i.width=e.width||i.width||b,i.height=e.height||i.height||c,g.width=i.width,g.height=i.height,f=new Chart(h),f[i.type](a.data,i);var j=function(b){if(console.log("redraw()"),b){console.log("drawing...");var c=i.type;f[c](a.chartObject.data,a.chartObject.options)}};a.$watch(function(){return a.chartObject},j),a.$watch("scope.data",j)}}}]),angular.module("app.directives").directive("themeFlotChartRealtime",[function(){return{restrict:"A",link:function(a,b){var c,d,e,f,g,h;return c=[],f=300,d=function(){var a,b,d,e;for(c.length>0&&(c=c.slice(1));c.length<f;)b=c.length>0?c[c.length-1]:50,e=b+10*Math.random()-5,0>e?e=0:e>100&&(e=100),c.push(e);for(d=[],a=0;a<c.length;)d.push([a,c[a]]),++a;return d},g=function(){e.setData([d()]),e.draw(),setTimeout(g,h)},c=[],f=300,h=200,e=$.plot(b[0],[d()],{series:{lines:{show:!0,fill:!0},shadowSize:0},yaxis:{min:0,max:100,show:!0,color:"#f5f5f5"},xaxis:{show:!0,color:"#f5f5f5"},grid:{hoverable:!0,borderWidth:1,borderColor:"#fff"},colors:["#383d43"]}),g()}}}]),angular.module("app.directives").directive("themeFlotChart",["Utilities",function(a){return{restrict:"AE",scope:{data:"=",options:"=",plotClick:"=?",plotHover:"=?",threshold:"=?",thresholdLabel:"=?"},link:function(a,b){if(a.thresholdLabel){var c=function(b,c){var d="#ddd",e=0,f=b.getPlotOffset().left,g=b.getData();angular.forEach(b.getData(),function(a){if(a.isThresholdSeries){if(a.data[0][1]<g[0].yaxis.min||a.data[0][1]>g[0].yaxis.max)return void(e=0);d=a.color,e=(1-(a.data[0][1]-g[0].yaxis.min)/(g[0].yaxis.max-g[0].yaxis.min))*(b.getPlaceholder().height()-b.getPlotOffset().top-b.getPlotOffset().bottom)-20}}),a.thresholdLabelElement||(a.thresholdLabelElement=$('<div id="theme-flot-chart-threshold-label"></div>').html(a.thresholdLabel).css({position:"absolute",display:"inline-block",padding:"5px 10px",color:d,"background-color":"transparent",opacity:.9}).appendTo(b.getPlaceholder())),a.thresholdLabelElement.css({top:e,left:f}),0===e?a.thresholdLabelElement.fadeOut(200):a.thresholdLabelElement.fadeIn(200)};a.options.hooks=a.options.hooks||{},a.options.hooks.draw=a.options.hooks.draw||[],a.options.hooks.draw.push(c)}var d=$.plot(b[0],a.data,a.options);a.plotHover&&$(b[0]).bind("plothover",a.plotHover),a.plotClick&&$(b[0]).bind("plotclick",a.plotClick),a.threshold&&a.$watch("threshold",function(b){angular.forEach(a.data,function(a){a.isThresholdSeries&&(a.data[0]=[0,b],a.data[1]=[a.data[1][0],b])}),d.setData(a.data,a.options),d.draw()})}}}]),angular.module("app.directives").directive("themeMorrisChart",[function(){return{scope:{data:"="},link:function(a,b,c){var d,e,f,g,h;switch(e=a.data,c.type){case"line":return d=void 0===c.lineColors||""===c.lineColors?null:JSON.parse(c.lineColors),g={element:b[0],data:e,xkey:c.xkey,ykeys:JSON.parse(c.ykeys),hideHover:"always",labels:JSON.parse(c.labels),lineWidth:c.lineWidth||2,lineColors:d||["#0b62a4","#7a92a3","#4da74d","#afd8f8","#edc240","#cb4b4b","#9440ed"],pointSize:c.pointSize||0,postUnits:c.postUnits||"",verticalGrid:!0},h=new Morris.Line(g);case"area":return d=void 0===c.lineColors||""===c.lineColors?null:JSON.parse(c.lineColors),g={element:b[0],data:e,xkey:c.xkey,ykeys:JSON.parse(c.ykeys),labels:JSON.parse(c.labels),lineWidth:c.lineWidth||2,lineColors:d||["#0b62a4","#7a92a3","#4da74d","#afd8f8","#edc240","#cb4b4b","#9440ed"],behaveLikeLine:c.behaveLikeLine||!1,fillOpacity:c.fillOpacity||"auto",pointSize:c.pointSize||4},h=new Morris.Area(g),$(window).resize(function(){h.redraw()});case"bar":return d=void 0===c.barColors||""===c.barColors?null:JSON.parse(c.barColors),g={element:b[0],data:e,xkey:c.xkey,ykeys:JSON.parse(c.ykeys),labels:JSON.parse(c.labels),barColors:d||["#0b62a4","#7a92a3","#4da74d","#afd8f8","#edc240","#cb4b4b","#9440ed"],stacked:c.stacked||null},h=new Morris.Bar(g),$(window).resize(function(){});case"donut":return d=void 0===c.colors||""===c.colors?null:JSON.parse(c.colors),g={element:b[0],data:e,colors:d||["#0B62A4","#3980B5","#679DC6","#95BBD7","#B0CCE1","#095791","#095085","#083E67","#052C48","#042135"]},c.formatter&&(f=new Function("y","data",c.formatter),g.formatter=f),h=new Morris.Donut(g),$(window).resize(function(){h.redraw()})}}}}]),angular.module("app.directives").directive("uiAvatar",function(){return{restrict:"E",transclude:!0,templateUrl:"directive-partials/ui-avatar.html",scope:{avatarSrc:"=src",uploadEndpoint:"=",successCallback:"=",containerWidth:"@matchWidth"},controller:["$scope","$timeout","Upload","Rover","Utilities",function(a,b,c,d,e){a.status=a.avatarSrc?"uploaded":"none",
a.containerWidth=a.containerWidth||"auto",a.upload=function(d){d&&(a.status="uploading",e.debug("Uploading avatar..."),c.upload({url:a.uploadEndpoint,data:{image:d}}).then(function(c){a.avatarSrc=c.data.avatarSrc,a.status="uploaded","function"==typeof a.successCallback&&b(function(){a.successCallback.call(c.data)})},function(b){e.alert("Could not upload avatar. Please try again later."),a.status=a.avatarSrc?"uploaded":"none"}))}}]}}),angular.module("app.directives").directive("uiEditableFields",function(){return{restrict:"AE",transclude:!0,scope:{id:"@",heading:"@",resource:"=model",saveResource:"=save",saveResourceCallback:"=saveCallback",deleteResource:"=delete"},controller:["$scope",function(a){a.state="idle",a.config=a.config||{};var b=a.items={};this.addItem=function(c){return c.state=a.state,c.model=a.resource,c.config=a.config,b[c.key]=c,!0},a.edit=function(){a.state="editing",angular.forEach(b,function(b){b.state=a.state})},a.save=function(){a.state="saving",angular.forEach(b,function(b){b.state=a.state}),a.saveResource.call().then(function(c){a.state="idle",a.saveResourceCallback.call(c.data,!0),angular.forEach(b,function(b){b.state=a.state})},function(c){a.state="idle",a.saveResourceCallback.call(c.data,!1),angular.forEach(b,function(b){b.state=a.state})})},a["delete"]=function(){a.deleteResource.apply()},a.$watch("resource",function(c){a.state="idle",angular.forEach(b,function(b){b.state=a.state,b.model=c})})}],templateUrl:"directive-partials/ui-editable-fields/fields.html"}}).directive("uiEditableField",["$filter","$timeout","$http","Utilities",function(a,b,c,d){return{require:"^uiEditableFields",restrict:"AE",scope:{label:"@",display:"@",key:"@",inputType:"@type",maxTags:"@",isRequired:"=required",isDisabled:"=disabled"},link:function(e,f,g,h){if(h.addItem(e))switch(e.data={},g.type){case"date":case"datetime":e.model[e.key]=e.model[e.key]||"";var i="MMMM d, yyyy",j="MMMM D, YYYY";"datetime"==g.type&&(j+=" (h:mm a)",i+=" (h:mm a)"),e.format=i,e.updateTimestamp=function(){e.model[e.key].length?(e.timestamp=e.model[e.key].replace(" ","T")+"-05:00",e.timestamp=a("date")(e.timestamp,i)):e.timestamp=""},e.updateTimestamp(),g.disabled||b(function(){$(f).find('input[type="datetime"]').datetimepicker({format:j,viewMode:"months"}).on("dp.change",function(a){e.model[e.key]=a.date.format("YYYY-MM-DD HH:mm:ss")}).data("DateTimePicker").date(e.timestamp)}),e.$watch("model",function(a){e.updateTimestamp()});break;case"gender":e.updateDisplay=function(){e.model[e.key]=e.model[e.key]||"",e.model[e.key].length>0?e.display=e.model[e.key].charAt(0).toUpperCase()+e.model[e.key].slice(1):e.display=""},e.updateDisplay(),e.$watch("model",function(a){e.updateDisplay()});break;case"length":e.config.unitForLength=e.config.unitForLength||"ft/in",e.units=["cm","m","in","ft/in"],e.model[e.key]=e.model[e.key]||0,e.updateUnit=function(b){switch(b){case"mm":e.config.unitForLength=b,e.data.lengthVal=1e3*e.model[e.key],e.data.displayStr=a("number")(e.data.lengthVal)+" mm";break;case"cm":e.config.unitForLength=b,e.data.lengthVal=100*e.model[e.key],e.data.displayStr=a("number")(e.data.lengthVal)+" cm";break;case"in":e.config.unitForLength=b,e.data.lengthVal=39.3701*e.model[e.key],e.data.displayStr=a("number")(e.data.lengthVal)+'"';break;case"m":e.config.unitForLength="m",e.data.lengthVal=e.model[e.key],e.data.displayStr=a("number")(e.data.lengthVal)+" m";break;default:e.config.unitForLength=b,e.data.lengthFeet=Math.floor(3.28084*e.model[e.key]),e.data.lengthInches=Math.floor(39.3701*e.model[e.key]-12*e.data.lengthFeet),e.data.displayStr=e.data.lengthFeet+"' "+e.data.lengthInches+'"'}},e.updateModel=function(){switch(d.debug('Updating length value for "'+e.key+'" ...'),e.config.unitForLength){case"mm":e.model[e.key]=e.data.lengthVal/1e3;break;case"cm":e.model[e.key]=e.data.lengthVal/100;break;case"in":e.model[e.key]=e.data.lengthVal/39.3701;break;case"ft/in":e.model[e.key]=e.data.lengthFeet/3.28084+e.data.lengthInches/39.3701;break;default:e.model[e.key]=e.data.lengthVal}d.debug("From "+e.data.displayStr+" to "+e.model[e.key]+" m")},e.updateUnit(e.config.unitForLength),e.$watch("model",function(a){e.updateUnit(e.config.unitForLength)});break;case"mass":e.config.unitForMass=e.config.unitForMass||"lbs",e.units=["kg","lbs","stone"],e.model[e.key]=e.model[e.key]||0,e.updateUnit=function(b){switch(b){case"g":e.config.unitForMass=b,e.data.massVal=1e3*e.model[e.key],e.data.displayStr=a("number")(e.data.massVal)+" g";break;case"kg":e.config.unitForMass="kg",e.data.massVal=e.model[e.key],e.data.displayStr=a("number")(e.data.massVal)+" kg";break;case"stone":e.config.unitForMass=b,e.data.massVal=.157473*e.model[e.key],e.data.displayStr=a("number")(e.data.massVal)+" stone";break;default:e.config.unitForMass=b,e.data.massVal=2.20462*e.model[e.key],e.data.displayStr=a("number")(e.data.massVal)+" lbs"}},e.updateModel=function(){switch(d.debug('Updating mass value for "'+e.key+'" ...'),e.config.unitForMass){case"g":e.model[e.key]=e.data.massVal/1e3;break;case"lbs":e.model[e.key]=e.data.massVal/2.20462;break;case"stone":e.model[e.key]=e.data.massVal/.157473;break;default:e.model[e.key]=e.data.massVal}d.debug("From "+e.data.displayStr+" to "+e.model[e.key]+" kg")},e.updateUnit(e.config.unitForMass),e.$watch("model",function(a){e.updateUnit(e.config.unitForMass)});break;case"tag":e.updateData=function(){angular.isArray(e.model[e.key])?(d.debug("Looping through tags array..."),e.data=[],e.display=[],e.options=[],angular.forEach(e.model[e.key],function(a){e.data.push(a.id),e.display.push(a.title),e.options.push({id:a.id,title:a.title})}),e.display=e.model[e.key].length?e.display.join(", "):"(none selected)"):angular.isObject(e.model[e.key])?e.model[e.key].id?(e.data=e.model[e.key].id,e.display=e.model[e.key].title,e.options=[{id:e.model[e.key].id,title:e.model[e.key].title}]):e.display="(none selected)":(e.model[e.key]=e.maxTags>1?[]:{},e.display="(none selected)")},e.updateData(),e.config={create:!0,valueField:"id",labelField:"title",searchField:["title"],maxOptions:15,maxItems:e.maxTags||1,load:function(a,b){return d.debug("Fetching tags..."),d.debug(a),a&&a.length?void c.get("/api/v1/tags",{params:{query:a,limit:15}}).then(function(a){b(a.data)},function(a){b()}):b()},onOptionAdd:function(a,b){a.trim().length<1||b.id||(d.debug("Creating tag: "+a),c.post("/api/v1/tags",{title:a.trim()}))},onChange:function(a){d.debug("updating data"),d.debug(a),e.model[e.key]=a}},e.$watch("model",function(a){e.updateData()});break;case"placeholder":break;default:e.init=function(){e.model[e.key]=e.model[e.key]||""},e.init(),e.$watch("model",function(a){e.init()})}},templateUrl:"directive-partials/ui-editable-fields/field-vertical.html"}}]).directive("uiEditableStandaloneField",function(){return{restrict:"AE",scope:{heading:"@",model:"=",key:"@",empty:"@",saveResource:"=save",saveResourceCallback:"=saveCallback",deleteResource:"=delete"},controller:["$scope","Utilities",function(a,b){a.state="idle",a.edit=function(){a.state="editing"},a.save=function(){b.debug("Saving model..."),a.state="saving",a.saveResource.call().then(function(b){a.state="idle",a.saveResourceCallback.call(b.data,!0)},function(b){a.state="idle",a.saveResourceCallback.call(b.data,!1)})},a["delete"]=function(){a.deleteResource.apply()},a.$watch("model",function(b){a.state="idle"})}],templateUrl:"directive-partials/ui-editable-fields/standalone-field.html"}}),angular.module("app.directives").directive("uiMovementPreview",function(){return{restrict:"E",templateUrl:"directive-partials/ui-movement-preview.html",scope:{ratio:"="},controller:["$scope","Rover",function(a,b){}]}}).directive("uiMovementPlaceholder",function(){return{restrict:"E",templateUrl:"directive-partials/ui-movement-placeholder.html",scope:{ratio:"="},controller:["$scope","Rover",function(a,b){}]}}),angular.module("app.directives").directive("uiPageTitle",function(){return{restrict:"E",templateUrl:"directive-partials/ui-page-title.html",scope:{title:"=",icon:"=?"},controller:["$scope","$timeout","Upload","Rover",function(a,b,c,d){}]}}),angular.module("app.directives").directive("uiTaggableInput",function(){return{restrict:"E",transclude:!0,templateUrl:"directive-partials/ui-taggable-input.html",scope:{model:"=",key:"@",maxTags:"@"},controller:["$scope","$http","Utilities",function(a,b,c){a.data=[],a.options=[],a.maxTags=a.maxTags||10,a.updateData=function(){angular.isArray(a.model[a.key])?angular.forEach(a.model[a.key],function(b){a.data.push(b.id),a.options.push({id:b.id,title:b.title})}):angular.isObject(a.model[a.key])?a.model[a.key].id&&(a.data=a.model[scope.key].id,a.options=[{id:a.model[a.key].id,title:a.model[a.key].title}]):a.model[a.key]=a.maxTags>1?[]:{}},a.updateData(),a.config={create:!0,valueField:"id",labelField:"title",searchField:["title"],maxOptions:15,maxItems:a.maxTags||1,load:function(a,d){return c.debug("Fetching tags..."),c.debug(a),a&&a.length?void b.get("/api/v1/tags",{params:{query:a,limit:50}}).then(function(a){d(a.data)},function(a){d()}):d()},onOptionAdd:function(a,d){a.trim().length<1||d.id||(c.debug("Creating tag: "+a),b.post("/api/v1/tags",{title:a.trim()}))},onChange:function(b){a.model[a.key]=b}},a.$watch("model",function(b){a.updateData()})}]}}).directive("uiProfileLookup",function(){return{restrict:"E",transclude:!0,templateUrl:"directive-partials/ui-taggable-input.html",scope:{model:"=?",profiles:"=?",select:"&selectProfile"},controller:["$scope","$http","Utilities",function(a,b,c){a.model=a.model||{},a.profiles=a.profiles||[],a.getLabel=function(a){var b=a.firstName;return a.lastName&&a.lastName.length&&(b+=" "+a.lastName),b},a.options=[],a.profiles.length>0&&angular.forEach(a.profiles,function(b){b&&b.id&&a.options.push({id:b.id,title:a.getLabel(b)})}),a.updateData=function(){a.model&&a.model.id?(a.data=a.model.id,a.options=[{id:a.model.id,title:a.getLabel(a.model)}]):a.model={}},a.updateData(),a.config={create:!1,valueField:"id",labelField:"title",searchField:["title"],maxOptions:15,maxItems:1,load:function(b,c){return b&&b.length?void c(a.options):c()},onChange:function(b){a.select({profile:parseInt(b)})}}}]}}),angular.module("app.filters").filter("mysqlDate",["$filter","Utilities",function(a,b){return function(b,c,d){return b=b||Date.now(),"function"==typeof b.match&&b.match(/([0-9]{4}-[01][0-9]-[0-3][0-9] [0-2][0-9]:[0-6][0-9]:[0-6][0-9])/)&&(b=b.replace(" ","T")+"Z",c=c||"MMMM d, yyyy (h:mm a)"),a("date")(b,c,d)}}]),angular.module("app.ui.services",[]).factory("loggit",[function(){var a;return toastr.options={closeButton:!0,positionClass:"toast-bottom-left",timeOut:"3000"},a=function(a,b){return toastr[b](a)},{log:function(b){a(b,"info")},logWarning:function(b){a(b,"warning")},logSuccess:function(b){a(b,"success")},logError:function(b){a(b,"error")}}}]),angular.module("app.controllers").service("MovementStore",function(){for(var a=["Deep Squat","Hurdle Step","Inline Lunge","Shoulder Mobility","Impingement (C. Test)","Active Straight Leg Raise","Trunk Stability Pushup","Press-up (C. Test)","Rotary Stability","Posterior Rocking (C. Test)"],b={test:0,analysis:1,data:2,summary:3},c=[],d=0;d<a.length;d++){var e={};if(e.name=a[d],e.url=e.name.toLowerCase().replace(" (c. test)","").split(" ").join("_"),e.latest_page=b.test,e.score=Math.floor(4*Math.random()+1),e.test_page_data={},e.analysis_page_data={},e.data_page_data={},e.summary_page_data={},5==d){var f=["LEFT","RIGHT"],g=3;e.sides=[];for(var h=0;h<f.length;h++)e.sides.push({name:f[h]});e.active_side=e.sides[0];for(var i=0;i<e.sides.length;i++){e.sides[i].trials=[];for(var j=0;g>j;j++)e.sides[i].trials.push({name:"Trial "+(j+1),status:"idle",joints:[{name:"HIP",movements:[{name:"Flexion/Extension",left_deg:108,right_deg:97,series_data:{name:"Hip Flexion",data:[0,15,20,60,70,90,80,75,60,45,0]}}]},{name:"KNEE",movements:[{name:"Flexion/Extension",left_deg:108,right_deg:97,series_data:{name:"Knee Flexion",data:[0,5,20,50,65,80,80,80,75,60,0]}}]}]});e.sides[i].active_trial=e.sides[i].trials[0]}}else e.sides=[{name:"TEST",trials:[{name:"Trial 1",status:"idle",joints:[]},{name:"Trial 2",status:"idle",joints:[]}]}],e.active_trial=e.sides[0].trials[0],e.disabled=!0;c.push(e)}return{movement_pages:c}}),angular.module("backendHeddoko",[]).factory("FMSForm",["$http",function(a){return{get:function(b){return a.get("/api/athletes/"+b+"/fmsforms")},create:function(b,c,d){var e=new FormData;return d&&(d.deepsquat_movement_file&&e.append("deepsquat_movement_file",d.deepsquat_movement_file[0]),d.Lhurdle_movement_file&&e.append("Lhurdle_movement_file",d.Lhurdle_movement_file[0]),d.Rhurdle_movement_file&&e.append("Rhurdle_movement_file",d.Rhurdle_movement_file[0]),d.Llunge_movement_file&&e.append("Llunge_movement_file",d.Llunge_movement_file[0]),d.Rlunge_movement_file&&e.append("Rlunge_movement_file",d.Rlunge_movement_file[0]),d.Lshoulder_movement_file&&e.append("Lshoulder_movement_file",d.Lshoulder_movement_file[0]),d.Rshoulder_movement_file&&e.append("Rshoulder_movement_file",d.Rshoulder_movement_file[0]),d.Limpingement_movement_file&&e.append("Limpingement_movement_file",d.Limpingement_movement_file[0]),d.Rimpingement_movement_file&&e.append("Rimpingement_movement_file",d.Rimpingement_movement_file[0]),d.Lactive_movement_file&&e.append("Lactive_movement_file",d.Lactive_movement_file[0]),d.Ractive_movement_file&&e.append("Ractive_movement_file",d.Ractive_movement_file[0]),d.trunk_movement_file&&e.append("trunk_movement_file",d.trunk_movement_file[0]),d.press_movement_file&&e.append("press_movement_file",d.press_movement_file[0]),d.Lrotary_movement_file&&e.append("Lrotary_movement_file",d.Lrotary_movement_file[0]),d.Rrotary_movement_file&&e.append("Rrotary_movement_file",d.Rrotary_movement_file[0]),d.posterior_movement_file&&e.append("posterior_movement_file",d.posterior_movement_file[0])),e.append("deepsquat",c.deepsquat),e.append("deepsquatcomments",c.deepsquatcomments||""),e.append("Lhurdle",c.Lhurdle),e.append("Rhurdle",c.Rhurdle),e.append("hurdlecomments",c.hurdlecomments||""),e.append("Llunge",c.Llunge),e.append("Rlunge",c.Rlunge),e.append("lungecomments",c.lungecomments||""),e.append("Lshoulder",c.Lshoulder),e.append("Rshoulder",c.Rshoulder),e.append("shouldercomments",c.shouldercomments||""),e.append("Limpingement",c.Limpingement),e.append("Rimpingement",c.Rimpingement),e.append("impingementcomments",c.impingementcomments||""),e.append("Lactive",c.Lactive),e.append("Ractive",c.Ractive),e.append("activecomments",c.activecomments||""),e.append("trunk",c.trunk),e.append("trunkcomments",c.trunkcomments||""),e.append("press",c.press),e.append("presscomments",c.presscomments||""),e.append("Lrotary",c.Lrotary),e.append("Rrotary",c.Rrotary),e.append("rotarycomments",c.rotarycomments||""),e.append("posterior",c.posterior),e.append("posteriorcomments",c.posteriorcomments||""),e.append("comment",c.comment),e.append("totalscore",c.totalscore),a.post("/api/athletes/"+b+"/fmsforms",e,{transformRequest:angular.identity,headers:{"Content-Type":void 0}})},update:function(b,c){return a({method:"PUT",url:"/api/athletes/"+b+"/fmsforms/"+c.id,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(c)})},destroy:function(b,c){return a["delete"]("/api/athletes/"+b+"/fmsforms/"+c)}}}]),angular.module("app.services").service("FMSDemoFactory",["Rover",function(a){a.state.fms_demo=a.state.fms_demo||{},this.data=a.state.fms_demo,this.data.runs=this.data.runs||{},this.runDataTemplate={status:"pending",numFaults:0};var b={isTestLive:!1,isTestSubmitted:!1,iterations:[],iteration:"",trials:[{name:"Trial 1",status:"pending"},{name:"Trial 2",status:"pending"},{name:"Trial 3",status:"pending"}],testRuns:{}};this.data.list=[$.extend(!0,{},b,{id:"aslr",name:"Active Straight-Leg Raise",iterations:["left","right"],iteration:"left"})],this.data.current=this.data.list[0],this.data.views=["sagittal","coronal","transverse"]}]),angular.module("app.services").service("DemoTrendsService",["Rover",function(a){this.trend={},this.gauge={},this.trend.dummyData=[],this.trend.dummyData.push({data:[[1,15],[2,20],[3,14],[4,10],[5,10],[6,20],[7,28],[8,26],[9,22],[10,23],[11,24]],label:"New visitors",lines:{fill:!0}}),this.trend.dummyData.push({data:[[1,9],[2,15],[3,17],[4,21],[5,16],[6,15],[7,13],[8,15],[9,29],[10,21],[11,29]],label:"Returning visitors",lines:{fill:!1}}),this.trend.options={series:{lines:{show:!0,fill:!1,lineWidth:3,fillColor:{colors:[{opacity:.3},{opacity:.3}]}},points:{show:!0,lineWidth:3,fill:!0,fillColor:"#ffffff",symbol:"circle",radius:5},shadowSize:0},colors:["#c1bfc0","#db5031"],tooltip:!0,tooltipOpts:{defaultTheme:!1},grid:{hoverable:!0,clickable:!0,tickColor:"#f9f9f9",borderWidth:1,borderColor:"#eeeeee"},xaxis:{ticks:[[1,"Jan."],[2,"Feb."],[3,"Mar."],[4,"Apr."],[5,"May"],[6,"June"],[7,"July"],[8,"Aug."],[9,"Sept."],[10,"Oct."],[11,"Nov."],[12,"Dec."]]}},this.gauge.dummyData={maxValue:3e3,animationSpeed:100,val:1300}}]),angular.module("app.services").factory("FMSService",["$http",function(a){return{get:function(b){var c=b?{params:{profile_id:b}}:{};return a.get("/api/fms",c)},create:function(b){return a.post("/api/fms",b)},update:function(b,c){return a.put("/api/fms/"+b,c)},destroy:function(b){return a["delete"]("/api/fms/"+b)}}}]),angular.module("app.services").factory("FolderService",["$http","apiEndpoint",function(a,b){return{endpoint:function(a){return b+"/profiles/"+a+"/folders/"},get:function(b,c){return a.get(this.endpoint(b)+c)},create:function(b,c){return a.post(this.endpoint(b),c)},update:function(b,c,d){return a.put(this.endpoint(b)+c,d)},destroy:function(b,c){return a["delete"](this.endpoint(b)+c)}}}]),angular.module("app.services").factory("GroupService",["$http","apiEndpoint","Utilities",function(a,b,c){return{endpoint:b+"/groups",list:function(b){var d={params:{embed:c.getEmbedParameter(b)}};return a.get(this.endpoint,d)},get:function(b,d){return a.get(this.endpoint+"/"+b,{params:{embed:c.getEmbedParameter(d)}})},create:function(b){return a.post(this.endpoint,b)},update:function(b,c){return a.put(this.endpoint+"/"+b,c)},destroy:function(b){return a["delete"](this.endpoint+"/"+b)},setAvatar:function(b,c){return a.post(this.endpoint+"/"+b+"/avatar",{image:c})}}}]),angular.module("app.services").factory("MovementService",["$http","apiEndpoint",function(a,b){return{endpoint:b+"/movements/",get:function(b){return a.get(this.endpoint+b)},search:function(b){return a.get(this.endpoint,{params:{}})},create:function(b,c){return a.post(this.endpoint,c,{params:{profile_id:b}})},update:function(b,c){return a.put(this.endpoint+b,c)},destroy:function(b){return a["delete"](this.endpoint+b)}}}]),angular.module("app.services").service("OnboardingService",["$timeout","Rover",function(a,b){this.getOptions=function(a){var b,c=[],d=[],e=$(a).length;return angular.forEach($(a),function(a){b=$(a).data("step")?$(a).data("step"):e,c[b]={element:a,intro:$(a).data("intro"),position:$(a).data("position")||"bottom"},e++}),angular.forEach(c,function(a){d.push(a)}),{steps:d,showStepNumbers:!1,showBullets:!0,exitOnOverlayClick:!0,exitOnEsc:!0,nextLabel:'<i class="fa fa-angle-double-right"></i>',prevLabel:'<i class="fa fa-angle-double-left"></i>',skipLabel:"I'll do this later",doneLabel:"Thanks!"}},this.general=function(a){var b=introJs();b.setOptions(this.getOptions(".onboarding-general")),"number"==typeof a?b.goToStep(a).start():b.start()}.bind(this)}]),angular.module("app.services").factory("ProfileService",["$http","$filter","Utilities","Rover","apiEndpoint",function(a,b,c,d,e){return{endpoint:e+"/profiles",list:function(b,d){var e={params:{embed:c.getEmbedParameter(d)}};return b&&(e.params.groupId=b),a.get(this.endpoint,e)},get:function(b,d){return a.get(this.endpoint+"/"+b,{params:{embed:c.getEmbedParameter(d)}})},create:function(b,d){return a.post(this.endpoint,b,{params:{embed:c.getEmbedParameter(d)}})},update:function(b,d,e){return a.put(this.endpoint+"/"+b,d,{params:{embed:c.getEmbedParameter(e)}})},destroy:function(b){return a["delete"](this.endpoint+"/"+b)},destroyAvatar:function(b){return a["delete"](this.endpoint+"/"+b+"/avatar")},setAvatar:function(b,c){return a.post(this.endpoint+"/"+b+"/avatar",{image:c})},format:function(a){return a.createdAt=a.createdAt||"",a.createdAt_formatted=a.createdAt.length>0?b("date")(a.createdAt.substr(0,10),"MMM d, yyyy"):"",angular.forEach(a.meta,function(b,c){a[c]=b}),a},formatForStorage:function(a){var b={id:a.id,firstName:a.firstName||"",lastName:a.lastName||"",meta:{height:a.height||0,mass:a.mass||0,dob:a.dob||"",gender:a.gender||"",phone:a.phone||"",email:a.email||"",medicalHistory:a.medicalHistory||"",injuries:a.injuries||"",notes:a.notes||"",params:a.params||""}};return a.feet>0&&a.inches&&(b.meta.height=.3048*(a.feet+a.inches/12)),a.weightInPounds>0&&(b.meta.mass=.453592*a.weightInPounds),a.groups&&a.groups.length>0&&(b.groups=a.groups.map(c.getId)),a.primaryTag&&a.primaryTag.length&&(c.getId(a.primaryTag)>0?b.tagId=c.getId(a.primaryTag):b.primaryTagTitle=a.primaryTag),a.secondaryTags&&a.secondaryTags.length>0&&(b.secondaryTags=[],b.secondaryTagTitles=[],angular.forEach(a.secondaryTags,function(a){c.getId(a)>0?b.secondaryTags.push(c.getId(a)):b.secondaryTagTitles.push(a)})),b}}}]),angular.module("app.rover",[]).service("Rover",["$window","$localStorage","$sessionStorage","$route","$location","$anchorScroll","$log","$timeout","Utilities",function(a,b,c,d,e,f,g,h,i){this.timestamp=Date.now(),this.isLocal="localhost"==window.location.hostname||window.location.hostname.match(/.*\.local$/i)||window.location.hostname.match(/.*\.vagrant$/i)?!0:!1,this.userHash=$('meta[name="user-hash"]').attr("content"),b[this.userHash]=b[this.userHash]||{},c[this.userHash]=c[this.userHash]||{},this.store=b[this.userHash],this.state=c[this.userHash],this.store.config=this.store.config||{},this.backgroundProcessCount=1,this.addBackgroundProcess=function(){this.backgroundProcessCount++,i.debug("Background processes: "+this.backgroundProcessCount),1===this.backgroundProcessCount&&i.showLoading()}.bind(this),this.doneBackgroundProcess=function(){return this.backgroundProcessCount>0&&this.backgroundProcessCount--,i.debug("Background processes: "+this.backgroundProcessCount),this.backgroundProcessCount<1?void h(function(){i.hideLoading()},500):void 0}.bind(this),this.browseTo={dashboard:function(){e.path("/dashboard")}.bind(this),groups:function(){e.path("/group")}.bind(this),group:function(a){void 0!==a&&(this.store.groupId=i.getId(a)),i.debug("Browsing to group #"+this.store.groupId),e.path("/group/"+this.store.groupId)}.bind(this),profile:function(a){void 0!==a&&(this.store.profileId=i.getId(a),a=this.store.profileId>0?this.state.profile.list[this.store.profileId]:null),a&&a.groups&&a.groups.length&&a.groups[0].id!=this.store.groupId&&(this.store.groupId=a.groups[0].id),i.debug("Browsing to profile #"+this.store.profileId),e.path("/profile/view")}.bind(this),path:function(a){i.debug("Browsing to path: "+a),e.path(a)}.bind(this),hash:function(a){e.hash()!==a?e.hash(a):f()}},this.browse=this.browseTo,this.overlayData={title:"",bodyTemplate:"",footerTemplate:""},this.openThumbnailSelector=function(){this.openOverlay("Choose Thumbnail Cover","thumbnail-selector/index.html","thumbnail-selector/footer.html")},this.openMovementEditor=function(){this.openOverlay("Movement Editor","movement-editor/index.html","movement-editor/footer.html")},this.openOverlay=function(a,b,c){this.debug('Opening overlay "'+a+'"'),this.overlayData={title:a,bodyTemplate:b,footerTemplate:c},$("#overlay-screen").modal()},this._events={onEndSession:[]},this.onEndSession=function(){},this.endSession=function(){c[this.userHash]={},i.debug("Ending session..."),a.location.href="/logout"}.bind(this),this.hasState=function(a,b){return this.state[a]&&this.state[a].list["_"+b]?!0:!1},this.getState=function(a,b,c){return this.hasState(a,b)?this.state[a].list["_"+b]:c},this.setState=function(a,b,c){this.state[a]||(this.state[a]={list:{length:0}}),this.hasState(a,b)||this.state[a].list.length++,this.state[a].list["_"+b]=c},this.debug=function(a){i.debug("Rover.debug is deprecated..."),i.debug(a)},this.error=function(a){i.debug("Rover.error is deprecated..."),i.error(a)},this.alert=function(a){i.debug("Rover.alert is deprecated..."),i.alert(a)},this.getConfig=function(a,b){return this.store.config[a]?this.store.config[a]:b}.bind(this),this.setConfig=function(a,b){return this.store.config[a]=b,b}.bind(this),this.getId=function(a){return i.debug("Rover.getId is deprecated..."),i.getId(a)}}]),angular.module("app.services").factory("ScreeningService",["$http","apiEndpoint",function(a,b){return{endpoint:b+"/screenings",get:function(b){return a.get(this.endpoint+"/"+b)},search:function(b){return a.get(this.endpoint,{params:{}})},create:function(b,c){return a.post(this.endpoint,c,{params:{profileId:b}})},update:function(b,c){return a.put(this.endpoint+"/"+b,c)},destroy:function(b){return a["delete"](this.endpoint+"/"+b)}}}]),angular.module("app.services").factory("UserService",["$http","apiEndpoint",function(a,b){return{endpoint:b+"/users/",get:function(b){return a.get(this.endpoint+b)},create:function(b){return a.post(this.endpoint,b)},update:function(b,c){return a.put(this.endpoint+b,c)},destroy:function(b){return a["delete"](this.endpoint+b)},setAvatar:function(b,c){return a.post(this.endpoint+b+"/avatar",{image:c})}}}]),angular.module("app.utilities",[]).service("Utilities",["$window","$localStorage","$sessionStorage","$route","$location","$log","$timeout",function(a,b,c,d,e,f,g){this.timestamp=Date.now(),this.isLocal="localhost"==a.location.hostname||a.location.hostname.match(/.*\.local$/i)||a.location.hostname.match(/.*\.vagrant$/i)?!0:!1,this.colour={blue:"#2c3a46",blueDark:"#1c242c",danger:"#db5031",heddokoGreen:"#3bd6b2",info:"#8170ca",orange:"#fabd39",silver:"#cbd4e3",textColour:"#ddd",textColourBlue:"#5b707d",warning:"#eec95a"},this.getEmbedParameter=function(a){return angular.isArray(a)?a.join(","):angular.isString(a)?a:""},this.getObjectLength=function(a){if(null===a||void 0===a||!a.hasOwnProperty)return 0;var b,c=0;for(b in a)a.hasOwnProperty(b)&&"length"!=b&&"_"!=b[0]&&c++;return c},this.getId=function(a){return a?"object"==typeof a?Number(a.id):-1!==["string","number"].indexOf(typeof a)?Number(a):0:0},this.debug=function(a){this.isLocal&&f.debug(a)},this.error=function(a){f.error(a)},this.alert=function(b){a.alert(b)},this.showLoading=function(){$(".page-loading-overlay").removeClass("loaded"),$(".load_circle_wrapper").removeClass("loaded")},this.hideLoading=function(){$(".page-loading-overlay").addClass("loaded"),$(".load_circle_wrapper").addClass("loaded")}}]);