
<!-- Copyright Heddoko(TM) 2015, all rights reserved. -->

<div class="page">
    <header>
        <h1>
            Movement Test <i class="fa fa-pencil-square-o"></i>
            <span></span>
        </h1>

        <!-- Append profile name to page title -->
        <div ng-show="global.getSelectedProfile().id > 0 && global.data.isFetchingScreeningData === false" class="h1-append">
            for {{ global.getSelectedProfile().firstName }} {{ global.getSelectedProfile().lastName }}

            <small>
                <a ng-click="global.store.profileId = 0" href="javascript:;">
                    (change)
                </a>
            </small>
        </div>
    </header>

    <!-- Test progress -->
    <div ng-show="screening.id > 0 && global.data.isFetchingScreeningData === false">

        <h2 class="text-center">
            {{ screening.title }}

            <br>
            <small>
                {{ screening.createdAt | mysqlDate:'d / M / yyyy' }}
            </small>
        </h2>

        <!-- Headings -->
        <div class="row">
            <div class="col-md-1 col-md-offset-7">
                <span class="text-muted">
                    Score
                </span>
            </div>
        </div>

        <div ng-repeat="movement in screening.movements" class="row" style="margin-bottom: 15px;">

            <div class="col-md-4 col-md-offset-3" style="line-height: 30px">
                <span class="text-muted">{{ $index + 1 }}</span>
                {{ movement.title }}
            </div>

            <div class="col-md-1">
                {{ movement.score | number:0 }} / {{ movement.scoreMax }}
            </div>

            <!-- Movement actions -->
            <div class="col-md-1">
                <div class="btn-group">
                    <button
                        class="btn btn-primary btn-circle dropdown-toggle"
                        data-toggle="dropdown"
                        aria-haspopup="true"
                        aria-expanded="false">

                        <i class="fa fa-plus"></i>
                    </button>

                    <ul class="dropdown-menu">
                        <li>
                            <a ng-click="global.alert('In Development')" href="javascript:;">
                                <i class="fa fa-fw fa-circle"></i> Capture movement live
                            </a>
                        </li>
                        <li>
                            <a ng-click="global.alert('In Development')" href="javascript:;">
                                <i class="fa fa-fw fa-cloud-upload"></i> Upload movement file
                            </a>
                        </li>
                        <li>
                            <a ng-click="global.alert('In Development')" href="javascript:;">
                                <i class="fa fa-fw fa-th"></i> Select existing movement
                            </a>
                        </li>
                        <li role="separator" class="divider"></li>
                        <li>
                            <a ng-click="global.alert('In Development')" href="javascript:;">
                                <i class="fa fa-fw fa-trash"></i> Remove
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Select a screening template -->
    <div ng-show="screening.id === 0 && global.data.isFetchingScreeningData === false">

        <!-- Temporary listing -->
        <div
            ng-show="global.getSelectedProfile().id > 0
                && global.data.isPreparingNewScreening === false">

            <div class="callout-elem callout-elem-info">
                <p>
                    Start by selecting a test template:
                </p>
            </div>

            <div class="col-md-4 col-md-offset-4">
                <a ng-click="createFunctionalMovementScreening()" href="javascript:;">
                    <i class="fa fa-plus fa-fw"></i> Functional Movement Test
                </a>
                <br>

                <a ng-click="global.alert('In Development.')" href="javascript:;">
                    <i class="fa fa-plus fa-fw"></i> Create a Custom Movement Test
                </a>
            </div>
        </div>

        <!-- Select a profile -->
        <div
            ng-show="global.getSelectedProfile().id === 0
                && global.data.isPreparingNewScreening === false">

            <div ng-include="'partials/select-profile.html'"></div>
        </div>

        <!-- Preparing screening records -->
        <div ng-show="global.data.isPreparingNewScreening === true">

            <br>
            <h2 class="text-center">
                Preparing Your Test
            </h2>

            <br>
            <br>
            <div class="text-center">
                <i class="fa fa-spinner fa-spin fa-2x"></i>
            </div>
        </div>
    </div>

    <!-- Loading screening data -->
    <div ng-show="global.data.isFetchingScreeningData === true">
        <div class="text-center" style="margin: 60px auto">
            <i class="fa fa-spinner fa-spin fa-2x"></i>
        </div>
    </div>
</div>
