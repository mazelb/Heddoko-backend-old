
<!-- Copyright Heddoko(TM) 2015, all rights reserved. -->

<div ng-if="profile.id > 0" class="page profile-page">
    <header>
        <h1>
            {{ profile.firstName }} {{ profile.lastName }} <i class="fa fa-user"></i>
            <span></span>
        </h1>

        <!-- Append main group to profile name -->
        <div ng-if="profile.groups.length > 0" class="h1-append">
            Team:

            <a href="#/groups/{{ profile.groups[0].id }}">
                {{ profile.groups[0].name }}
            </a>
        </div>
    </header>

    <section ng-if="profile.id > 0">
    	<div class="row">

    		<div class="col-xs-12 col-md-5 col-lg-3">

                <!-- Avatar -->
                <div class="text-center">
                    <ui-avatar
                        data-upload-endpoint="uploadAvatarEndpoint"
                        data-success-callback="uploadAvatarCallback"
                        data-src="profile.avatarSrc">
                    </ui-avatar>
                </div>

                <!-- Profile shortcuts -->
                <div class="profile-shortcuts">

                    <!-- Placeholder for football position (NFL TechCrunch demo) -->
                    <span ng-if="false" style="line-height: 60px; font-size: 1.2em;">
                        Position: Quarterback
                    </span>

                    <div class="pull-right">

                        <!-- New screening button -->
                        <a
                            ng-if="profile.id > 0"
                            ng-click="startNewScreening()"
                            href="javascript:;">

                            <button class="btn btn-default btn-circle btn-lg">
                                <i class="fa fa-pencil-square-o"></i>
                            </button>
                        </a>

                        <!-- Delete group button -->
                        <a
                            ng-if="profile.id > 0"
                            data-toggle="modal"
                            data-target="#deleteProfileConfirmation"
                            href="javascript:;">

                            <button class="btn btn-danger btn-circle btn-lg">
                                <i class="fa fa-trash"></i>
                            </button>
                        </a>

                        <!-- Delete confirmation -->
                        <div class="modal fade" id="deleteProfileConfirmation">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-body">
                                        <p>
                                            Are you sure you want to delete <b>{{ profile.firstName }}
                                            {{ profile.lastName }}</b>'s profile?
                                        </p>
                                    </div>
                                    <div class="modal-footer text-center">
                                        <button type="button" class="btn btn-default" data-dismiss="modal">
                                            Cancel
                                        </button>
                                        <button ng-click="deleteProfile()" type="button" class="btn btn-primary" data-dismiss="modal">
                                            Yes, delete {{ profile.firstName }}
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
    		</div>

            <!-- Profile details -->
            <div class="col-xs-12 col-md-7 col-lg-5">
                <ui-editable-fields
                    data-id="profileDetails"
                    data-model="profile"
                    data-save="saveProfileDetails"
                    data-save-callback="saveProfileDetailsCallback"
                    data-heading="Details">

                    <div class="row">

                        <!-- First name -->
                        <div class="col-xs-12 col-sm-6">
                            <ui-editable-field
                                data-label="First Name"
                                data-key="firstName"
                                data-required="true">
                            </ui-editable-field>
                        </div>

                        <!-- Last name -->
                        <div class="col-xs-12 col-sm-6">
                            <ui-editable-field
                                data-label="Last Name"
                                data-key="lastName">
                            </ui-editable-field>
                        </div>
                    </div>

                    <div class="row">

                        <!-- Height -->
                        <div class="col-xs-12 col-sm-6">
                            <ui-editable-field
                                data-label="Height"
                                data-key="height"
                                data-type="length">
                            </ui-editable-field>
                        </div>

                        <!-- Weight -->
                        <div class="col-xs-12 col-sm-6">
                            <ui-editable-field
                                data-label="Weight"
                                data-key="mass"
                                data-type="mass">
                            </ui-editable-field>
                        </div>
                    </div>

                    <!-- Placeholder for NFL Techrunch demo -->
                    <div ng-if="false" class="row">
                        <div class="col-xs-12 col-sm-6">

                            <!-- Hand size -->
                            <div class="row ui-editable-field ui-editable-field-vertical">
                                <div class="col-xs-12">
                                    <div class="ui-editable-field-value">
                                        <a href="javascript:;" class="edit-text">
                                            9.6"
                                        </a>
                                        <a href="javascript:;" class="edit-icon fa fa-pencil"></a>
                                    </div>
                                </div>
                                <div class="col-xs-12 ui-editable-field-label">
                                    Hand Size
                                </div>
                            </div>
                        </div>

                        <div class="col-xs-12 col-sm-6">

                            <!-- Arm length -->
                            <div class="row ui-editable-field ui-editable-field-vertical">
                                <div class="col-xs-12">
                                    <div class="ui-editable-field-value">
                                        <a href="javascript:;" class="edit-text">
                                            33"
                                        </a>
                                        <a href="javascript:;" class="edit-icon fa fa-pencil"></a>
                                    </div>
                                </div>
                                <div class="col-xs-12 ui-editable-field-label">
                                    Arm Length
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">

                        <!-- Date of Birth -->
                        <div class="col-xs-12 col-sm-6">
                            <ui-editable-field
                                data-label="Date of Birth"
                                data-key="dob"
                                data-type="date">
                            </ui-editable-field>
                        </div>

                        <!-- Gender -->
                        <div class="col-xs-12 col-sm-6">
                            <ui-editable-field
                                data-label="Gender"
                                data-key="gender"
                                data-type="gender">
                            </ui-editable-field>
                        </div>
                    </div>

                    <div class="row">

                        <!-- Phone -->
                        <div class="col-xs-12 col-sm-6">
                            <ui-editable-field
                                data-label="Phone #"
                                data-key="phone"
                                data-empty="(xxx) xxx-xxxx">
                            </ui-editable-field>
                        </div>

                        <!-- Email -->
                        <div class="col-xs-12 col-sm-6">
                            <ui-editable-field
                                data-label="Email"
                                data-key="email"
                                data-empty="address@example.com">
                            </ui-editable-field>
                        </div>
                    </div>

                    <div class="row">

                        <!-- Primary Tag -->
                        <div class="col-xs-12 col-sm-6">
                            <ui-editable-field
                                data-label="Primary Sport"
                                data-key="mainTag"
                                data-type="tag"
                                data-empty="Select a Sport">
                            </ui-editable-field>
                        </div>

                        <!-- Secondary tags -->
                        <div class="col-xs-12 col-sm-6">
                            <ui-editable-field
                                data-label="Other Sports"
                                data-key="tags"
                                data-type="tag"
                                data-max-tags="10"
                                data-empty="Select a Sport">
                            </ui-editable-field>
                        </div>
                    </div>

                    <!-- Profile creation date -->
                    <div class="row">
                        <div class="col-xs-12">
                            <ui-editable-field
                                data-label="Profile Created"
                                data-key="createdAt"
                                data-type="datetime"
                                data-disabled="true">
                            </ui-editable-field>
                        </div>
                    </div>

                    <!-- Placeholder info (NFL TechCrunch demo) -->
                    <div ng-if="false" class="row">

                        <!-- Experience -->
                        <div class="col-xs-12 col-md-6">
                            <div class="row ui-editable-field ui-editable-field-vertical">
                                <div class="col-xs-12">
                                    <div class="ui-editable-field-value">
                                        <a href="javascript:;" class="edit-text">
                                            {{ profile.id }} Seasons
                                        </a>
                                        <a href="javascript:;" class="edit-icon fa fa-pencil"></a>
                                    </div>
                                </div>
                                <div class="col-xs-12 ui-editable-field-label">
                                    Experience
                                </div>
                            </div>
                        </div>

                        <!-- Snap count -->
                        <div class="col-xs-12 col-md-6">
                            <div class="row ui-editable-field ui-editable-field-vertical">
                                <div class="col-xs-12">
                                    <div class="ui-editable-field-value">
                                        <a href="javascript:;" class="edit-text">
                                            {{ profile.id * 59 | number:0 }}
                                        </a>
                                        <a href="javascript:;" class="edit-icon fa fa-pencil"></a>
                                    </div>
                                </div>
                                <div class="col-xs-12 ui-editable-field-label">
                                    Snap Count
                                </div>
                            </div>
                        </div>
                    </div>
                </ui-editable-fields>
            </div>

            <!-- General notes -->
            <div class="col-xs-12 col-lg-4">
        		<div class="col-xs-12" style="margin-bottom: 15px">
                    <ui-editable-standalone-field
                        data-heading="Medical Information"
                        data-model="profile.meta.data"
                        data-key="medicalHistory"
                        data-empty="Medical information:"
                        data-save="saveProfileDetails"
                        data-save-callback="saveProfileDetailsCallback">
                    </ui-editable-standalone-field>
                </div>

                <div class="col-xs-12" style="margin-bottom: 15px">
                    <ui-editable-standalone-field
                        data-heading="Previous Injuries"
                        data-model="profile.meta.data"
                        data-key="injuries"
                        data-empty="Injuries:"
                        data-save="saveProfileDetails"
                        data-save-callback="saveProfileDetailsCallback">
                    </ui-editable-standalone-field>

                    <!-- Placeholder for previous injuries (NFL TechCrunch demo) -->
                    <div ng-if="false" class="ui-editable-list-container">
                        <h3 class="title">
                            Previous Injuries
                            <span></span>
                        </h3>
                        <br>

                        <div ng-if="profile.lastName == 'Todd'">
                            Rotator cuff tear on Nov 17, 2015
                            <br>
                            (surgery Nov 21, 2015).
                            <br>

                            <a href="#/demo/trends" style="display: inline-block; margin: 10px 0 0 5px;">
                                <i class="fa fa-angle-double-right fa-fw"></i> Track Rehabilitation
                            </a>
                        </div>

                        <div ng-if="profile.lastName != 'Todd'">
                            No previous injuries.
                        </div>
                    </div>
                </div>

                <div class="col-xs-12" style="margin-bottom: 15px">
                    <ui-editable-standalone-field
                        data-heading="Other Notes"
                        data-model="profile.meta.data"
                        data-key="notes"
                        data-empty="Notes:"
                        data-save="saveProfileDetails"
                        data-save-callback="saveProfileDetailsCallback">
                    </ui-editable-standalone-field>
        		</div>
        	</div>
        </div>

        <!-- Demo: training sesion (NFL TechCrunch demo) -->
        <div ng-if="false">
            <div ng-controller="DemoTrainingSessionController" id="trendsDemo">
                <ng-include src="'profile/partials/demo-session.html'"></ng-include>
            </div>
        </div>

        <!-- Performance indicators for single movements -->
        <div ng-controller="TestController">
            <ng-include src="'profile/partials/movement-indicators.html'"></ng-include>
        </div>

        <!-- Performance indicators for movement screenings -->
        <div ng-controller="TestController">
            <ng-include src="'profile/partials/screening-indicators.html'"></ng-include>
        </div>
    </section>
</div>

<!-- No profile selected -->
<div ng-if="profile.id === 0 && !global.data.isFetchingProfiles" ng-include="'partials/select-profile.html'" class="page"></div>

<!-- Loading profiles -->
<div ng-if="global.data.isFetchingProfiles" class="page">
    <ng-include src="'partials/loading.html'"></ng-include>
</div>
